(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6538],{5623:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(19946).A)("ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]])},13717:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(19946).A)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]])},35169:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(19946).A)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},63075:(e,s,t)=>{Promise.resolve().then(t.bind(t,97780))},84616:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(19946).A)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},97780:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>f});var a=t(95155),l=t(12115),i=t(35695),c=t(42099),r=t(89006),n=t(95060),d=t(94615),x=t(35169),h=t(4516),m=t(13717),o=t(84616),g=t(23227),u=t(5623),j=t(19420),p=t(71007);function f(){let e=(0,i.useParams)(),s=(0,i.useRouter)(),{selectedClient:t}=(0,r.tH)(),[f,N]=(0,l.useState)(!0),[v,y]=(0,l.useState)(null),[b,w]=(0,l.useState)([]);(0,l.useEffect)(()=>{e.id&&k(e.id)},[e.id]);let k=async e=>{try{N(!0);let{data:s,error:t}=await c.N.from("organizations").select("*").eq("id",e).single();if(t)throw t;y(s);let{data:a,error:l}=await c.N.from("locations").select("*").eq("organization_id",e);l?w([]):w(a||[])}catch(e){}finally{N(!1)}},A=t=>{t.href&&("/"===t.href?s.push("/"):s.push("/organizations/".concat(e.id).concat(t.href)))};return f?(0,a.jsxs)("div",{className:"min-h-screen bg-gray-900 text-white",children:[(0,a.jsx)(d.default,{currentPage:"Organizations"}),(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsx)(n.A,{onItemClick:A}),(0,a.jsx)("div",{className:"flex-1 p-6",children:(0,a.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,a.jsx)("div",{className:"text-gray-400",children:"Loading..."})})})]})]}):(0,a.jsxs)("div",{className:"min-h-screen bg-gray-900 text-white",children:[(0,a.jsx)(d.default,{currentPage:"Organizations"}),(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsx)(n.A,{onItemClick:A}),(0,a.jsx)("div",{className:"flex-1",children:(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("button",{onClick:()=>{s.push("/organizations/".concat(e.id))},className:"flex items-center space-x-2 text-gray-400 hover:text-white mb-4 text-sm",children:[(0,a.jsx)(x.A,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:"Back to Organization"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)("div",{className:"w-12 h-12 bg-purple-600 rounded-full flex items-center justify-center",children:(0,a.jsx)(h.A,{className:"w-6 h-6 text-white"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-semibold",children:"Locations"}),(0,a.jsxs)("div",{className:"text-sm text-gray-400",children:[null==v?void 0:v.name," â€¢ ",b.length," locations"]})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsxs)("button",{onClick:()=>s.push("/organizations/".concat(e.id,"/edit")),className:"flex items-center space-x-2 bg-blue-600 hover:bg-blue-700 px-4 py-2 rounded text-sm",children:[(0,a.jsx)(m.A,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:"Edit"})]}),(0,a.jsxs)("button",{className:"flex items-center space-x-2 bg-green-600 hover:bg-green-700 px-4 py-2 rounded text-sm",children:[(0,a.jsx)(o.A,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:"Add Location"})]})]})]}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-6",children:b.map(e=>(0,a.jsxs)("div",{className:"bg-gray-800 rounded-lg p-4 hover:bg-gray-750 transition-colors",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,a.jsx)("div",{className:"w-10 h-10 ".concat((e=>{switch(e){case"Main Office":return"bg-blue-600";case"Branch":return"bg-green-600";case"Warehouse":return"bg-yellow-600";case"Remote Site":return"bg-purple-600";case"Service Center":return"bg-red-600";case"Training Facility":return"bg-indigo-600";default:return"bg-gray-600"}})(e.type)," rounded-full flex items-center justify-center"),children:(0,a.jsx)(g.A,{className:"w-5 h-5 text-white"})}),(0,a.jsx)("button",{className:"p-1 text-gray-400 hover:text-white hover:bg-gray-700 rounded",children:(0,a.jsx)(u.A,{className:"w-4 h-4"})})]}),(0,a.jsx)("h3",{className:"font-medium text-white mb-2 line-clamp-2",children:e.name}),(0,a.jsx)("div",{className:"text-sm text-blue-400 mb-2",children:e.type}),(0,a.jsxs)("div",{className:"space-y-2 text-sm text-gray-300",children:[(0,a.jsxs)("div",{className:"flex items-start space-x-2",children:[(0,a.jsx)(h.A,{className:"w-4 h-4 mt-0.5 flex-shrink-0"}),(0,a.jsx)("span",{className:"line-clamp-2",children:e.address})]}),e.phone&&(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(j.A,{className:"w-4 h-4 flex-shrink-0"}),(0,a.jsx)("span",{children:e.phone})]}),e.contact&&(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(p.A,{className:"w-4 h-4 flex-shrink-0"}),(0,a.jsx)("span",{children:e.contact})]})]})]},e.id))}),(0,a.jsxs)("div",{className:"grid grid-cols-5 gap-4",children:[(0,a.jsxs)("div",{className:"bg-gray-800 rounded-lg p-4",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-white",children:b.length}),(0,a.jsx)("div",{className:"text-sm text-gray-400",children:"Total Locations"})]}),(0,a.jsxs)("div",{className:"bg-gray-800 rounded-lg p-4",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-blue-500",children:b.filter(e=>"Main Office"===e.type).length}),(0,a.jsx)("div",{className:"text-sm text-gray-400",children:"Main Offices"})]}),(0,a.jsxs)("div",{className:"bg-gray-800 rounded-lg p-4",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-green-500",children:b.filter(e=>"Branch"===e.type).length}),(0,a.jsx)("div",{className:"text-sm text-gray-400",children:"Branches"})]}),(0,a.jsxs)("div",{className:"bg-gray-800 rounded-lg p-4",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-yellow-500",children:b.filter(e=>"Warehouse"===e.type).length}),(0,a.jsx)("div",{className:"text-sm text-gray-400",children:"Warehouses"})]}),(0,a.jsxs)("div",{className:"bg-gray-800 rounded-lg p-4",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-purple-500",children:b.filter(e=>"Remote Site"===e.type).length}),(0,a.jsx)("div",{className:"text-sm text-gray-400",children:"Remote Sites"})]})]})]})})]})]})}}},e=>{e.O(0,[5647,6441,7365,3930,8441,5964,7358],()=>e(e.s=63075)),_N_E=e.O()}]);