(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[506],{4229:(e,a,t)=>{"use strict";t.d(a,{A:()=>l});let l=(0,t(19946).A)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]])},29869:(e,a,t)=>{"use strict";t.d(a,{A:()=>l});let l=(0,t(19946).A)("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]])},46211:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>A});var l=t(95155),s=t(12115),n=t(35695),r=t(42099),i=t(89006),o=t(95060),d=t(94615),c=t(57434),m=t(23227),x=t(17580),u=t(84616),h=t(62525),g=t(4516),p=t(14186),y=t(75525);function b(e){var a,t,n,r,i,o,d,b,v,j,f,N,w,C,A,I,k,S,z,P,M,T,E,O,L,H,D,Z,_,B,R;let{initialData:F,onSave:V,onCancel:U,saving:q=!1,isNewOrganization:J=!1}=e,[W,K]=(0,s.useState)({title:(null==F?void 0:F.title)||"",timeZone:(null==F?void 0:F.timeZone)||"EST",hoursOfOperation:(null==F?void 0:F.hoursOfOperation)||"9-5",siteSummaryLegacy:{description:(null==F||null==(a=F.siteSummaryLegacy)?void 0:a.description)||"",notes:(null==F||null==(t=F.siteSummaryLegacy)?void 0:t.notes)||"",accessInstructions:(null==F||null==(n=F.siteSummaryLegacy)?void 0:n.accessInstructions)||""},generalInfo:{organizationType:(null==F||null==(r=F.generalInfo)?void 0:r.organizationType)||"Client",industry:(null==F||null==(i=F.generalInfo)?void 0:i.industry)||"",website:(null==F||null==(o=F.generalInfo)?void 0:o.website)||"",mainPhone:(null==F||null==(d=F.generalInfo)?void 0:d.mainPhone)||"",mainEmail:(null==F||null==(b=F.generalInfo)?void 0:b.mainEmail)||"",address:(null==F||null==(v=F.generalInfo)?void 0:v.address)||"",city:(null==F||null==(j=F.generalInfo)?void 0:j.city)||"",state:(null==F||null==(f=F.generalInfo)?void 0:f.state)||"",zipCode:(null==F||null==(N=F.generalInfo)?void 0:N.zipCode)||"",country:(null==F||null==(w=F.generalInfo)?void 0:w.country)||"Canada",taxId:(null==F||null==(C=F.generalInfo)?void 0:C.taxId)||"",accountManager:(null==F||null==(A=F.generalInfo)?void 0:A.accountManager)||"",serviceLevel:(null==F||null==(I=F.generalInfo)?void 0:I.serviceLevel)||"Standard"},name:(null==F?void 0:F.name)||(null==F?void 0:F.title)||"",description:(null==F?void 0:F.description)||"",website:(null==F?void 0:F.website)||(null==F||null==(k=F.generalInfo)?void 0:k.website)||"",phone:(null==F?void 0:F.phone)||(null==F||null==(S=F.generalInfo)?void 0:S.mainPhone)||"",email:(null==F?void 0:F.email)||(null==F||null==(z=F.generalInfo)?void 0:z.mainEmail)||"",address:(null==F?void 0:F.address)||(null==F||null==(P=F.generalInfo)?void 0:P.address)||"",city:(null==F?void 0:F.city)||(null==F||null==(M=F.generalInfo)?void 0:M.city)||"",state:(null==F?void 0:F.state)||(null==F||null==(T=F.generalInfo)?void 0:T.state)||"",country:(null==F?void 0:F.country)||(null==F||null==(E=F.generalInfo)?void 0:E.country)||"Canada",postalCode:(null==F?void 0:F.postal_code)||(null==F||null==(O=F.generalInfo)?void 0:O.zipCode)||"",contacts:(null==F?void 0:F.contacts)||[],locations:(null==F?void 0:F.locations)||[],emergencyContact:(null==F?void 0:F.emergencyContact)||"",afterHourAccess:{site:(null==F||null==(L=F.afterHourAccess)?void 0:L.site)||"",primaryContact:(null==F||null==(H=F.afterHourAccess)?void 0:H.primaryContact)||"",notes:(null==F||null==(D=F.afterHourAccess)?void 0:D.notes)||"",accessInstructions:(null==F||null==(Z=F.afterHourAccess)?void 0:Z.accessInstructions)||""},clientAuthorization:{securityAuthorization:(null==F||null==(_=F.clientAuthorization)?void 0:_.securityAuthorization)||"",purchasingAuthority:(null==F||null==(B=F.clientAuthorization)?void 0:B.purchasingAuthority)||"",onsiteAssistance:(null==F||null==(R=F.clientAuthorization)?void 0:R.onsiteAssistance)||""},onboardingDetails:(null==F?void 0:F.onboardingDetails)||""}),G=(e,a,t)=>{K(l=>({...l,[e]:{...l[e],[a]:t}}))},Q=(e,a,t)=>{K(l=>({...l,contacts:l.contacts.map(l=>l.id===e?{...l,[a]:t}:l)}))},X=(e,a,t)=>{K(l=>({...l,locations:l.locations.map(l=>l.id===e?{...l,[a]:t}:l)}))};return(0,l.jsxs)("form",{onSubmit:e=>{e.preventDefault(),V(W)},className:"space-y-6",children:[(0,l.jsxs)("div",{className:"bg-gray-800 rounded-lg p-6",children:[(0,l.jsxs)("h2",{className:"text-lg font-medium mb-4 flex items-center space-x-2",children:[(0,l.jsx)(c.A,{className:"w-5 h-5"}),(0,l.jsx)("span",{children:"General Information"})]}),(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Organization Type"}),(0,l.jsxs)("select",{value:W.generalInfo.organizationType,onChange:e=>G("generalInfo","organizationType",e.target.value),className:"w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-white",children:[(0,l.jsx)("option",{value:"Client",children:"Client"}),(0,l.jsx)("option",{value:"Vendor",children:"Vendor"}),(0,l.jsx)("option",{value:"Partner",children:"Partner"}),(0,l.jsx)("option",{value:"Internal",children:"Internal"})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Industry"}),(0,l.jsx)("input",{type:"text",value:W.generalInfo.industry,onChange:e=>G("generalInfo","industry",e.target.value),className:"w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-white placeholder-gray-400",placeholder:"e.g., Construction, Technology"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Website"}),(0,l.jsx)("input",{type:"url",value:W.generalInfo.website,onChange:e=>G("generalInfo","website",e.target.value),className:"w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-white placeholder-gray-400",placeholder:"https://example.com"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Main Phone"}),(0,l.jsx)("input",{type:"tel",value:W.generalInfo.mainPhone,onChange:e=>G("generalInfo","mainPhone",e.target.value),className:"w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-white placeholder-gray-400",placeholder:"(555) 123-4567"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Main Email"}),(0,l.jsx)("input",{type:"email",value:W.generalInfo.mainEmail,onChange:e=>G("generalInfo","mainEmail",e.target.value),className:"w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-white placeholder-gray-400",placeholder:"info@example.com"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Account Manager"}),(0,l.jsx)("input",{type:"text",value:W.generalInfo.accountManager,onChange:e=>G("generalInfo","accountManager",e.target.value),className:"w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-white placeholder-gray-400",placeholder:"Account manager name"})]}),(0,l.jsxs)("div",{className:"col-span-2",children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Address"}),(0,l.jsx)("input",{type:"text",value:W.generalInfo.address,onChange:e=>G("generalInfo","address",e.target.value),className:"w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-white placeholder-gray-400",placeholder:"Street address"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"City"}),(0,l.jsx)("input",{type:"text",value:W.generalInfo.city,onChange:e=>G("generalInfo","city",e.target.value),className:"w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-white placeholder-gray-400",placeholder:"City"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"State/Province"}),(0,l.jsx)("input",{type:"text",value:W.generalInfo.state,onChange:e=>G("generalInfo","state",e.target.value),className:"w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-white placeholder-gray-400",placeholder:"State/Province"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Zip/Postal Code"}),(0,l.jsx)("input",{type:"text",value:W.generalInfo.zipCode,onChange:e=>G("generalInfo","zipCode",e.target.value),className:"w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-white placeholder-gray-400",placeholder:"Zip/Postal Code"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Country"}),(0,l.jsxs)("select",{value:W.generalInfo.country,onChange:e=>G("generalInfo","country",e.target.value),className:"w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-white",children:[(0,l.jsx)("option",{value:"Canada",children:"Canada"}),(0,l.jsx)("option",{value:"United States",children:"United States"}),(0,l.jsx)("option",{value:"United Kingdom",children:"United Kingdom"}),(0,l.jsx)("option",{value:"Australia",children:"Australia"})]})]})]})]}),(0,l.jsxs)("div",{className:"bg-gray-800 rounded-lg p-6",children:[(0,l.jsxs)("h2",{className:"text-lg font-medium mb-4 flex items-center space-x-2",children:[(0,l.jsx)(m.A,{className:"w-5 h-5"}),(0,l.jsx)("span",{children:"Site Summary"})]}),(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Title"}),(0,l.jsx)("input",{type:"text",value:W.title,onChange:e=>K({...W,title:e.target.value}),className:"w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-white placeholder-gray-400",placeholder:"Enter site title",required:!0})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Time Zone"}),(0,l.jsxs)("select",{value:W.timeZone,onChange:e=>K({...W,timeZone:e.target.value}),className:"w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-white",children:[(0,l.jsx)("option",{value:"EST",children:"EST"}),(0,l.jsx)("option",{value:"PST",children:"PST"}),(0,l.jsx)("option",{value:"MST",children:"MST"}),(0,l.jsx)("option",{value:"CST",children:"CST"}),(0,l.jsx)("option",{value:"UTC",children:"UTC"})]})]}),(0,l.jsxs)("div",{className:"col-span-2",children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Hours of Operation"}),(0,l.jsx)("input",{type:"text",value:W.hoursOfOperation,onChange:e=>K({...W,hoursOfOperation:e.target.value}),className:"w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-white placeholder-gray-400",placeholder:"e.g., 9-5, Monday-Friday 8:00 AM - 6:00 PM"})]})]})]}),(0,l.jsxs)("div",{className:"bg-gray-800 rounded-lg p-6",children:[(0,l.jsxs)("h2",{className:"text-lg font-medium mb-4 flex items-center space-x-2",children:[(0,l.jsx)(c.A,{className:"w-5 h-5"}),(0,l.jsx)("span",{children:"Site Summary (Legacy)"})]}),(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Description"}),(0,l.jsx)("textarea",{value:W.siteSummaryLegacy.description,onChange:e=>G("siteSummaryLegacy","description",e.target.value),rows:3,className:"w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-white placeholder-gray-400",placeholder:"Legacy site description and details"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Notes"}),(0,l.jsx)("textarea",{value:W.siteSummaryLegacy.notes,onChange:e=>G("siteSummaryLegacy","notes",e.target.value),rows:3,className:"w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-white placeholder-gray-400",placeholder:"Additional notes and comments"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Access Instructions"}),(0,l.jsx)("textarea",{value:W.siteSummaryLegacy.accessInstructions,onChange:e=>G("siteSummaryLegacy","accessInstructions",e.target.value),rows:3,className:"w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-white placeholder-gray-400",placeholder:"Legacy access instructions"})]})]})]}),(0,l.jsxs)("div",{className:"bg-gray-800 rounded-lg p-6",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,l.jsxs)("h2",{className:"text-lg font-medium flex items-center space-x-2",children:[(0,l.jsx)(x.A,{className:"w-5 h-5"}),(0,l.jsx)("span",{children:"Client Contacts"})]}),(0,l.jsxs)("button",{type:"button",onClick:()=>{let e={id:Date.now().toString(),name:"",email:"",phone:"",role:"Contact",isPrimary:!1,department:"",title:""};K(a=>({...a,contacts:[...a.contacts,e]}))},className:"flex items-center space-x-2 bg-green-600 hover:bg-green-700 px-3 py-1 rounded text-sm",children:[(0,l.jsx)(u.A,{className:"w-4 h-4"}),(0,l.jsx)("span",{children:"Add Contact"})]})]}),(0,l.jsx)("div",{className:"space-y-4",children:W.contacts.map(e=>(0,l.jsxs)("div",{className:"bg-gray-700 rounded-lg p-4",children:[(0,l.jsxs)("div",{className:"grid grid-cols-3 gap-4 mb-3",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Name"}),(0,l.jsx)("input",{type:"text",value:e.name,onChange:a=>Q(e.id,"name",a.target.value),className:"w-full bg-gray-600 border border-gray-500 rounded px-3 py-2 text-white placeholder-gray-400",placeholder:"Contact name"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Role"}),(0,l.jsxs)("select",{value:e.role,onChange:a=>Q(e.id,"role",a.target.value),className:"w-full bg-gray-600 border border-gray-500 rounded px-3 py-2 text-white",children:[(0,l.jsx)("option",{value:"Primary Contact",children:"Primary Contact"}),(0,l.jsx)("option",{value:"Secondary Contact",children:"Secondary Contact"}),(0,l.jsx)("option",{value:"Emergency Contact",children:"Emergency Contact"}),(0,l.jsx)("option",{value:"Technical Contact",children:"Technical Contact"}),(0,l.jsx)("option",{value:"Billing Contact",children:"Billing Contact"}),(0,l.jsx)("option",{value:"Manager",children:"Manager"}),(0,l.jsx)("option",{value:"IT Contact",children:"IT Contact"})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Email"}),(0,l.jsx)("input",{type:"email",value:e.email,onChange:a=>Q(e.id,"email",a.target.value),className:"w-full bg-gray-600 border border-gray-500 rounded px-3 py-2 text-white placeholder-gray-400",placeholder:"email@example.com"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Phone"}),(0,l.jsx)("input",{type:"tel",value:e.phone,onChange:a=>Q(e.id,"phone",a.target.value),className:"w-full bg-gray-600 border border-gray-500 rounded px-3 py-2 text-white placeholder-gray-400",placeholder:"(555) 123-4567"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Department"}),(0,l.jsx)("input",{type:"text",value:e.department||"",onChange:a=>Q(e.id,"department",a.target.value),className:"w-full bg-gray-600 border border-gray-500 rounded px-3 py-2 text-white placeholder-gray-400",placeholder:"Department"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Title"}),(0,l.jsx)("input",{type:"text",value:e.title||"",onChange:a=>Q(e.id,"title",a.target.value),className:"w-full bg-gray-600 border border-gray-500 rounded px-3 py-2 text-white placeholder-gray-400",placeholder:"Job title"})]})]}),(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,l.jsx)("input",{type:"checkbox",checked:e.isPrimary,onChange:a=>Q(e.id,"isPrimary",a.target.checked),className:"rounded bg-gray-600 border-gray-500 text-green-600 focus:ring-green-500"}),(0,l.jsx)("span",{className:"text-sm text-gray-300",children:"Primary Contact"})]}),(0,l.jsx)("button",{type:"button",onClick:()=>{var a;return a=e.id,void K(e=>({...e,contacts:e.contacts.filter(e=>e.id!==a)}))},className:"p-2 text-red-400 hover:text-red-300 hover:bg-red-900/20 rounded",children:(0,l.jsx)(h.A,{className:"w-4 h-4"})})]})]},e.id))})]}),(0,l.jsxs)("div",{className:"bg-gray-800 rounded-lg p-6",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,l.jsxs)("h2",{className:"text-lg font-medium flex items-center space-x-2",children:[(0,l.jsx)(g.A,{className:"w-5 h-5"}),(0,l.jsx)("span",{children:"Locations"})]}),(0,l.jsxs)("button",{type:"button",onClick:()=>{let e={id:Date.now().toString(),name:"",address:"",type:"Branch",phone:"",contact:""};K(a=>({...a,locations:[...a.locations,e]}))},className:"flex items-center space-x-2 bg-green-600 hover:bg-green-700 px-3 py-1 rounded text-sm",children:[(0,l.jsx)(u.A,{className:"w-4 h-4"}),(0,l.jsx)("span",{children:"Add Location"})]})]}),(0,l.jsx)("div",{className:"space-y-3",children:W.locations.map(e=>(0,l.jsx)("div",{className:"bg-gray-700 rounded-lg p-4",children:(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-3 mb-3",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Location Name"}),(0,l.jsx)("input",{type:"text",value:e.name,onChange:a=>X(e.id,"name",a.target.value),className:"w-full bg-gray-600 border border-gray-500 rounded px-3 py-2 text-white placeholder-gray-400 text-sm",placeholder:"Location name"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Type"}),(0,l.jsxs)("select",{value:e.type,onChange:a=>X(e.id,"type",a.target.value),className:"w-full bg-gray-600 border border-gray-500 rounded px-3 py-2 text-white text-sm",children:[(0,l.jsx)("option",{value:"Main Office",children:"Main Office"}),(0,l.jsx)("option",{value:"Branch",children:"Branch"}),(0,l.jsx)("option",{value:"Warehouse",children:"Warehouse"}),(0,l.jsx)("option",{value:"Remote Site",children:"Remote Site"}),(0,l.jsx)("option",{value:"Service Center",children:"Service Center"}),(0,l.jsx)("option",{value:"Training Facility",children:"Training Facility"}),(0,l.jsx)("option",{value:"Storage",children:"Storage"})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Address"}),(0,l.jsx)("input",{type:"text",value:e.address,onChange:a=>X(e.id,"address",a.target.value),className:"w-full bg-gray-600 border border-gray-500 rounded px-3 py-2 text-white placeholder-gray-400 text-sm",placeholder:"Full address"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Phone"}),(0,l.jsx)("input",{type:"tel",value:e.phone||"",onChange:a=>X(e.id,"phone",a.target.value),className:"w-full bg-gray-600 border border-gray-500 rounded px-3 py-2 text-white placeholder-gray-400 text-sm",placeholder:"(555) 123-4567"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Primary Contact"}),(0,l.jsxs)("select",{value:e.contact||"",onChange:a=>X(e.id,"contact",a.target.value),className:"w-full bg-gray-600 border border-gray-500 rounded px-3 py-2 text-white text-sm",children:[(0,l.jsx)("option",{value:"",children:"Select contact"}),W.contacts.map(e=>(0,l.jsx)("option",{value:e.name,children:e.name},e.id))]})]}),(0,l.jsx)("div",{className:"flex items-end",children:(0,l.jsx)("button",{type:"button",onClick:()=>{var a;return a=e.id,void K(e=>({...e,locations:e.locations.filter(e=>e.id!==a)}))},className:"p-2 text-red-400 hover:text-red-300 hover:bg-red-900/20 rounded",children:(0,l.jsx)(h.A,{className:"w-4 h-4"})})})]})},e.id))})]}),(0,l.jsxs)("div",{className:"bg-gray-800 rounded-lg p-6",children:[(0,l.jsxs)("h2",{className:"text-lg font-medium mb-4 flex items-center space-x-2",children:[(0,l.jsx)(p.A,{className:"w-5 h-5"}),(0,l.jsx)("span",{children:"After Hour and Building/Site/Location Access"})]}),(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Site"}),(0,l.jsx)("input",{type:"text",value:W.afterHourAccess.site,onChange:e=>G("afterHourAccess","site",e.target.value),className:"w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-white placeholder-gray-400",placeholder:"Site name"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Primary Contact"}),(0,l.jsx)("select",{value:W.afterHourAccess.primaryContact,onChange:e=>G("afterHourAccess","primaryContact",e.target.value),className:"w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-white",children:W.contacts.map(e=>(0,l.jsx)("option",{value:e.name,children:e.name},e.id))})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Notes"}),(0,l.jsx)("textarea",{value:W.afterHourAccess.notes,onChange:e=>G("afterHourAccess","notes",e.target.value),rows:3,className:"w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-white placeholder-gray-400",placeholder:"Enter access notes and instructions"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Access Instructions"}),(0,l.jsx)("textarea",{value:W.afterHourAccess.accessInstructions,onChange:e=>G("afterHourAccess","accessInstructions",e.target.value),rows:4,className:"w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-white placeholder-gray-400",placeholder:"Detailed access instructions for after hours"})]})]})]}),(0,l.jsxs)("div",{className:"bg-gray-800 rounded-lg p-6",children:[(0,l.jsxs)("h2",{className:"text-lg font-medium mb-4 flex items-center space-x-2",children:[(0,l.jsx)(y.A,{className:"w-5 h-5"}),(0,l.jsx)("span",{children:"Client Authorization (Primaries)"})]}),(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Security Authorization"}),(0,l.jsx)("select",{value:W.clientAuthorization.securityAuthorization,onChange:e=>G("clientAuthorization","securityAuthorization",e.target.value),className:"w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-white",children:W.contacts.map(e=>(0,l.jsx)("option",{value:e.name,children:e.name},e.id))})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Purchasing Authority"}),(0,l.jsx)("select",{value:W.clientAuthorization.purchasingAuthority,onChange:e=>G("clientAuthorization","purchasingAuthority",e.target.value),className:"w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-white",children:W.contacts.map(e=>(0,l.jsx)("option",{value:e.name,children:e.name},e.id))})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Onsite Assistance"}),(0,l.jsx)("input",{type:"text",value:W.clientAuthorization.onsiteAssistance,onChange:e=>G("clientAuthorization","onsiteAssistance",e.target.value),className:"w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-white placeholder-gray-400",placeholder:"Onsite assistance contact"})]})]})]}),(0,l.jsxs)("div",{className:"bg-gray-800 rounded-lg p-6",children:[(0,l.jsxs)("h2",{className:"text-lg font-medium mb-4 flex items-center space-x-2",children:[(0,l.jsx)(c.A,{className:"w-5 h-5"}),(0,l.jsx)("span",{children:"Initial Onboarding Details"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Onboarding Notes"}),(0,l.jsx)("textarea",{value:W.onboardingDetails,onChange:e=>K({...W,onboardingDetails:e.target.value}),rows:6,className:"w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-white placeholder-gray-400",placeholder:"Enter initial onboarding details, setup notes, and important information..."})]})]}),(0,l.jsxs)("div",{className:"flex items-center justify-end space-x-4 pt-6 border-t border-gray-700",children:[(0,l.jsx)("button",{type:"button",onClick:U,className:"px-6 py-2 bg-gray-700 hover:bg-gray-600 text-white rounded-lg transition-colors",children:"Cancel"}),(0,l.jsx)("button",{type:"submit",disabled:q,className:"px-6 py-2 bg-green-600 hover:bg-green-700 disabled:bg-green-800 text-white rounded-lg transition-colors flex items-center space-x-2",children:q?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),(0,l.jsx)("span",{children:"Saving..."})]}):(0,l.jsx)("span",{children:"Save Changes"})})]})]})}var v=t(54416),j=t(4229);let f=(0,t(19946).A)("paperclip",[["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 2.829 2.829l8.414-8.586a4 4 0 1 0-5.657-5.657l-8.379 8.551a6 6 0 1 0 8.485 8.485l8.379-8.551",key:"1miecu"}]]);var N=t(29869),w=t(69803),C=t(69074);function A(){let e=(0,n.useParams)(),a=(0,n.useRouter)(),{selectedClient:t}=(0,i.tH)(),[c,x]=(0,s.useState)(!0),[u,h]=(0,s.useState)(!1),[g,p]=(0,s.useState)(null);(0,s.useEffect)(()=>{e.id&&y(e.id)},[e.id]);let y=async e=>{try{x(!0);let{data:a,error:t}=await r.N.from("organizations").select("*").eq("id",e).single();if(t)throw t;p(a)}catch(e){}finally{x(!1)}},A=async t=>{try{var l,s,n,i,o,d,c,m,x;h(!0);let u={name:t.title||t.name,description:(null==(l=t.siteSummaryLegacy)?void 0:l.description)||"",website:t.website||(null==(s=t.generalInfo)?void 0:s.website)||"",phone:t.phone||(null==(n=t.generalInfo)?void 0:n.mainPhone)||"",email:t.email||(null==(i=t.generalInfo)?void 0:i.mainEmail)||"",address:t.address||(null==(o=t.generalInfo)?void 0:o.address)||"",city:t.city||(null==(d=t.generalInfo)?void 0:d.city)||"",state:t.state||(null==(c=t.generalInfo)?void 0:c.state)||"",country:t.country||(null==(m=t.generalInfo)?void 0:m.country)||"Canada",postal_code:t.postalCode||(null==(x=t.generalInfo)?void 0:x.zipCode)||"",timezone:t.timeZone||"EST",updated_at:new Date().toISOString()},{error:g}=await r.N.from("organizations").update(u).eq("id",e.id);if(g)throw Error("Failed to update organization: ".concat(g.message));a.push("/organizations/".concat(e.id))}catch(e){alert(e.message||"Failed to save organization")}finally{h(!1)}},I=()=>{a.push("/organizations/".concat(e.id))},k=t=>{t.href&&("/"===t.href?a.push("/"):a.push("/organizations/".concat(e.id).concat(t.href)))};return c?(0,l.jsxs)("div",{className:"min-h-screen bg-gray-900 text-white",children:[(0,l.jsx)(d.default,{currentPage:"Organizations"}),(0,l.jsxs)("div",{className:"flex",children:[(0,l.jsx)(o.A,{onItemClick:k}),(0,l.jsx)("div",{className:"flex-1 p-6",children:(0,l.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,l.jsx)("div",{className:"text-gray-400",children:"Loading organization..."})})})]})]}):(0,l.jsxs)("div",{className:"min-h-screen bg-gray-900 text-white",children:[(0,l.jsx)(d.default,{currentPage:"Organizations"}),(0,l.jsxs)("div",{className:"flex",children:[(0,l.jsx)(o.A,{onItemClick:k}),(0,l.jsx)("div",{className:"flex-1",children:(0,l.jsxs)("div",{className:"p-6",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,l.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,l.jsx)("div",{className:"w-12 h-12 bg-red-600 rounded-full flex items-center justify-center",children:(0,l.jsx)(m.A,{className:"w-6 h-6 text-white"})}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h1",{className:"text-2xl font-semibold",children:"Edit Organization"}),(0,l.jsx)("div",{className:"text-sm text-gray-400",children:null==g?void 0:g.name})]})]}),(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsxs)("button",{onClick:I,className:"flex items-center space-x-2 bg-gray-700 hover:bg-gray-600 px-4 py-2 rounded text-sm",children:[(0,l.jsx)(v.A,{className:"w-4 h-4"}),(0,l.jsx)("span",{children:"Cancel"})]}),(0,l.jsxs)("button",{onClick:A,disabled:u,className:"flex items-center space-x-2 bg-green-600 hover:bg-green-700 disabled:bg-green-800 px-4 py-2 rounded text-sm",children:[(0,l.jsx)(j.A,{className:"w-4 h-4"}),(0,l.jsx)("span",{children:u?"Saving...":"Save"})]})]})]}),(0,l.jsxs)("div",{className:"grid grid-cols-3 gap-6",children:[(0,l.jsx)("div",{className:"col-span-2",children:(0,l.jsx)(b,{initialData:{title:(null==g?void 0:g.name)||"",timeZone:"EST",hoursOfOperation:"9-5",contacts:[],afterHourAccess:{site:"",primaryContact:"",notes:"",accessInstructions:""},clientAuthorization:{securityAuthorization:"Namby Vithanarachchi",purchasingAuthority:"Nick Melati",onsiteAssistance:""}},onSave:A,onCancel:I,saving:u,isNewOrganization:!1})}),(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsxs)("div",{className:"bg-gray-800 rounded-lg p-4",children:[(0,l.jsxs)("h3",{className:"text-sm font-medium text-gray-300 mb-3 flex items-center space-x-2",children:[(0,l.jsx)(f,{className:"w-4 h-4"}),(0,l.jsx)("span",{children:"Attachments"})]}),(0,l.jsxs)("div",{className:"border-2 border-dashed border-gray-600 rounded-lg p-6 text-center",children:[(0,l.jsx)(N.A,{className:"w-8 h-8 text-gray-500 mx-auto mb-2"}),(0,l.jsx)("p",{className:"text-sm text-gray-400",children:"Browse or drop files to attach"}),(0,l.jsx)("p",{className:"text-xs text-gray-500",children:"Max file size 100MB each"})]})]}),(0,l.jsxs)("div",{className:"bg-gray-800 rounded-lg p-4",children:[(0,l.jsxs)("h3",{className:"text-sm font-medium text-gray-300 mb-3 flex items-center space-x-2",children:[(0,l.jsx)(w.A,{className:"w-4 h-4"}),(0,l.jsx)("span",{children:"Embedded Passwords"})]}),(0,l.jsx)("p",{className:"text-sm text-gray-500 mb-3",children:"No Embedded Passwords to show"}),(0,l.jsx)("button",{className:"text-sm text-blue-400 hover:text-blue-300",children:"Add Password"})]}),(0,l.jsxs)("div",{className:"bg-gray-800 rounded-lg p-4",children:[(0,l.jsx)("h3",{className:"text-sm font-medium text-gray-300 mb-3",children:"Related Items"}),(0,l.jsx)("p",{className:"text-sm text-gray-500 mb-3",children:"No Related Items to show"}),(0,l.jsx)("button",{className:"text-sm text-blue-400 hover:text-blue-300",children:"Add Related Item"})]}),(0,l.jsxs)("div",{className:"bg-gray-800 rounded-lg p-4",children:[(0,l.jsxs)("h3",{className:"text-sm font-medium text-gray-300 mb-3 flex items-center space-x-2",children:[(0,l.jsx)(C.A,{className:"w-4 h-4"}),(0,l.jsx)("span",{children:"Revisions"})]}),(0,l.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,l.jsxs)("div",{className:"flex justify-between text-gray-400",children:[(0,l.jsx)("span",{children:"Jul 19, 2022 - 10:25 pm"}),(0,l.jsx)("span",{children:"John Doe"})]}),(0,l.jsxs)("div",{className:"flex justify-between text-gray-400",children:[(0,l.jsx)("span",{children:"Mar 21, 2022 - 8:19 pm"}),(0,l.jsx)("span",{children:"Jane Smith"})]})]})]})]})]})]})})]})]})}},54416:(e,a,t)=>{"use strict";t.d(a,{A:()=>l});let l=(0,t(19946).A)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},62525:(e,a,t)=>{"use strict";t.d(a,{A:()=>l});let l=(0,t(19946).A)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]])},84616:(e,a,t)=>{"use strict";t.d(a,{A:()=>l});let l=(0,t(19946).A)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},94907:(e,a,t)=>{Promise.resolve().then(t.bind(t,46211))}},e=>{e.O(0,[5647,6441,7365,3930,8441,5964,7358],()=>e(e.s=94907)),_N_E=e.O()}]);