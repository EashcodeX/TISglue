(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8491],{4229:(e,a,t)=>{"use strict";t.d(a,{A:()=>s});let s=(0,t(19946).A)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]])},35169:(e,a,t)=>{"use strict";t.d(a,{A:()=>s});let s=(0,t(19946).A)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},46977:(e,a,t)=>{"use strict";t.d(a,{A:()=>u});var s=t(95155),l=t(12115),r=t(35695),n=t(42099),i=t(35169),c=t(54416),d=t(4229),o=t(1243),m=t(48313);function u(e){let{title:a,tableName:t,organizationId:u,fields:h,redirectPath:p,onCancel:x}=e,b=(0,r.useRouter)(),[y,g]=(0,l.useState)({organization_id:u}),[v,f]=(0,l.useState)(!1),[w,j]=(0,l.useState)(null),[N,_]=(0,l.useState)(!1),[k,C]=(0,l.useState)(!1),S=(e,a)=>{g(t=>({...t,[e]:a}))},A=async()=>{C(!0),j(null);try{await P()}catch(e){j("Test failed: ".concat(e.message))}finally{C(!1)}},P=async()=>{f(!0),j(null);try{let e=await fetch("/api/passwords/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(y)}),a=await e.json();e.ok&&a.success?(alert("âœ… Password saved successfully!"),b.push(p)):j("Save failed: ".concat(a.error||"Unknown error"))}catch(e){j("Save error: ".concat(e.message))}finally{f(!1)}},D=async e=>{if(e.preventDefault(),"passwords"===t)return void await P();try{f(!0),j(null);let e=h.filter(e=>e.required&&!y[e.name]).map(e=>e.label);if(e.length>0)return void j("Please fill in required fields: ".concat(e.join(", ")));let{data:a,error:s}=await n.N.from(t).insert([y]).select();if(s)throw s;b.push(p)}catch(s){let e="Failed to create item. Please try again.",a=!1;(null==s?void 0:s.message)&&(s.message.includes("relation")&&s.message.includes("does not exist")?(e='Database table "'.concat(t,'" does not exist. Please run the database setup first by visiting /fix-missing-tables'),a=!0):s.message.includes("duplicate key")?e="An item with this information already exists.":s.message.includes("violates check constraint")?e="Invalid data provided. Please check your input.":s.message.includes("violates foreign key constraint")?e="Invalid reference data. Please check your selections.":s.message.includes("column")&&s.message.includes("does not exist")?(e="Database column is missing. Please run the database setup at /fix-missing-tables",a=!0):s.message.includes("schema cache")||s.message.includes("Could not find")?(e='Database schema issue detected. Try "Alternative" method or visit /manual-db-setup for manual fix instructions.',a=!0):e="Error: ".concat(s.message)),_(a),j(e)}finally{f(!1)}},M=()=>{x?x():b.push(p)};return(0,s.jsx)("div",{className:"min-h-screen bg-gray-900 text-white",children:(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsxs)("button",{onClick:M,className:"flex items-center space-x-2 text-gray-400 hover:text-white",children:[(0,s.jsx)(i.A,{className:"w-5 h-5"}),(0,s.jsx)("span",{children:"Back"})]}),(0,s.jsx)("h1",{className:"text-2xl font-semibold",children:a})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsxs)("button",{onClick:M,className:"flex items-center space-x-2 bg-gray-700 hover:bg-gray-600 px-4 py-2 rounded text-sm",children:[(0,s.jsx)(c.A,{className:"w-4 h-4"}),(0,s.jsx)("span",{children:"Cancel"})]}),(0,s.jsxs)("button",{onClick:D,disabled:v,className:"flex items-center space-x-2 bg-green-600 hover:bg-green-700 disabled:bg-green-800 px-4 py-2 rounded text-sm",children:[(0,s.jsx)(d.A,{className:"w-4 h-4"}),(0,s.jsx)("span",{children:v?"Saving...":"passwords"===t?"Save Password":"Save"})]})]})]}),w&&"passwords"!==t&&(0,s.jsx)("div",{className:"bg-red-900/20 border border-red-500 rounded-lg p-4 mb-6",children:(0,s.jsxs)("div",{className:"flex items-start justify-between",children:[(0,s.jsxs)("div",{className:"flex items-start space-x-2",children:[(0,s.jsx)(o.A,{className:"w-5 h-5 text-red-400 mt-0.5 flex-shrink-0"}),(0,s.jsx)("p",{className:"text-red-400",children:w})]}),N&&(0,s.jsxs)("div",{className:"flex space-x-2 ml-4 flex-shrink-0",children:[(0,s.jsxs)("button",{onClick:A,disabled:k,className:"flex items-center space-x-1 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-600 disabled:cursor-not-allowed px-3 py-1 rounded text-xs text-white",children:[(0,s.jsx)(m.A,{className:"w-3 h-3"}),(0,s.jsx)("span",{children:k?"Saving...":"Save Password"})]}),(0,s.jsxs)("button",{onClick:P,disabled:v,className:"flex items-center space-x-1 bg-green-600 hover:bg-green-700 disabled:bg-gray-600 disabled:cursor-not-allowed px-3 py-1 rounded text-xs text-white",children:[(0,s.jsx)(d.A,{className:"w-3 h-3"}),(0,s.jsx)("span",{children:v?"Saving...":"Save Now"})]})]})]})}),(0,s.jsx)("div",{className:"bg-gray-800 rounded-lg p-6",children:(0,s.jsx)("form",{onSubmit:D,className:"space-y-6",children:(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:h.map(e=>(0,s.jsxs)("div",{className:"textarea"===e.type?"md:col-span-2":"",children:[(0,s.jsxs)("label",{htmlFor:e.name,className:"block text-sm font-medium text-gray-300 mb-2",children:[e.label,e.required&&(0,s.jsx)("span",{className:"text-red-400 ml-1",children:"*"})]}),(e=>{let a={id:e.name,name:e.name,required:e.required,className:"w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:e.placeholder};switch(e.type){case"textarea":return(0,s.jsx)("textarea",{...a,rows:e.rows||4,value:y[e.name]||"",onChange:a=>S(e.name,a.target.value)});case"select":var t;return(0,s.jsxs)("select",{...a,value:y[e.name]||"",onChange:a=>S(e.name,a.target.value),children:[(0,s.jsxs)("option",{value:"",children:["Select ",e.label]}),null==(t=e.options)?void 0:t.map(e=>(0,s.jsx)("option",{value:e.value,children:e.label},e.value))]});case"checkbox":return(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("input",{type:"checkbox",id:e.name,name:e.name,checked:y[e.name]||!1,onChange:a=>S(e.name,a.target.checked),className:"w-4 h-4 text-blue-600 bg-gray-700 border-gray-600 rounded focus:ring-blue-500"}),(0,s.jsx)("label",{htmlFor:e.name,className:"ml-2 text-sm text-gray-300",children:e.label})]});default:return(0,s.jsx)("input",{...a,type:e.type,value:y[e.name]||"",onChange:a=>S(e.name,a.target.value)})}})(e)]},e.name))})})})]})})}},48313:(e,a,t)=>{"use strict";t.d(a,{A:()=>s});let s=(0,t(19946).A)("wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.106-3.105c.32-.322.863-.22.983.218a6 6 0 0 1-8.259 7.057l-7.91 7.91a1 1 0 0 1-2.999-3l7.91-7.91a6 6 0 0 1 7.057-8.259c.438.12.54.662.219.984z",key:"1ngwbx"}]])},50417:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>c});var s=t(95155),l=t(35695),r=t(46977),n=t(94615),i=t(95060);function c(){let e=(0,l.useParams)();return(0,s.jsxs)("div",{className:"min-h-screen bg-gray-900 text-white",children:[(0,s.jsx)(n.default,{currentPage:"Organizations"}),(0,s.jsxs)("div",{className:"flex",children:[(0,s.jsx)(i.A,{onItemClick:e=>{}}),(0,s.jsx)("div",{className:"flex-1",children:(0,s.jsx)(r.A,{title:"New Warranty",tableName:"warranties",organizationId:e.id,fields:[{name:"asset_name",label:"Asset Name",type:"text",required:!0,placeholder:"Name of the asset under warranty"},{name:"manufacturer",label:"Manufacturer",type:"text",placeholder:"e.g., Dell, HP, Cisco, Microsoft"},{name:"model",label:"Model",type:"text",placeholder:"Product model number"},{name:"serial_number",label:"Serial Number",type:"text",placeholder:"Device serial number"},{name:"warranty_type",label:"Warranty Type",type:"select",required:!0,options:[{value:"hardware",label:"Hardware"},{value:"software",label:"Software"},{value:"extended",label:"Extended"},{value:"maintenance",label:"Maintenance"}]},{name:"warranty_provider",label:"Warranty Provider",type:"text",placeholder:"Company providing warranty support"},{name:"purchase_date",label:"Purchase Date",type:"date",placeholder:"When was this item purchased?"},{name:"warranty_start_date",label:"Warranty Start Date",type:"date",required:!0},{name:"warranty_end_date",label:"Warranty End Date",type:"date",required:!0},{name:"warranty_duration_months",label:"Warranty Duration (Months)",type:"number",placeholder:"12, 24, 36, etc."},{name:"coverage_type",label:"Coverage Type",type:"select",options:[{value:"full",label:"Full Coverage"},{value:"parts_only",label:"Parts Only"},{value:"labor_only",label:"Labor Only"},{value:"limited",label:"Limited Coverage"}]},{name:"service_level",label:"Service Level",type:"select",options:[{value:"next_business_day",label:"Next Business Day"},{value:"4_hour",label:"4 Hour Response"},{value:"8_hour",label:"8 Hour Response"},{value:"24_hour",label:"24 Hour Response"},{value:"best_effort",label:"Best Effort"}]},{name:"warranty_cost",label:"Warranty Cost ($)",type:"number",placeholder:"1500.00"},{name:"renewal_cost",label:"Renewal Cost ($)",type:"number",placeholder:"800.00"},{name:"auto_renewal",label:"Auto Renewal Enabled",type:"checkbox"},{name:"contact_name",label:"Contact Name",type:"text",placeholder:"Support contact person"},{name:"contact_phone",label:"Contact Phone",type:"tel",placeholder:"+1 (555) 123-4567"},{name:"contact_email",label:"Contact Email",type:"email",placeholder:"support@company.com"},{name:"warranty_document_url",label:"Warranty Document URL",type:"text",placeholder:"https://example.com/warranty.pdf"},{name:"notes",label:"Notes",type:"textarea",placeholder:"Additional warranty information...",rows:3}],redirectPath:"/organizations/".concat(e.id,"/warranties")})})]})]})}},54416:(e,a,t)=>{"use strict";t.d(a,{A:()=>s});let s=(0,t(19946).A)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},95539:(e,a,t)=>{Promise.resolve().then(t.bind(t,50417))}},e=>{e.O(0,[5647,6441,7365,3930,8441,5964,7358],()=>e(e.s=95539)),_N_E=e.O()}]);