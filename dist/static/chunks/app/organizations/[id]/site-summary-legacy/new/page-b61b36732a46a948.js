(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9957],{4229:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(19946).A)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]])},25681:(e,s,a)=>{Promise.resolve().then(a.bind(a,79827))},54416:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(19946).A)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},79827:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>y});var t=a(95155),l=a(12115),r=a(35695),n=a(42099),c=a(89006),i=a(95060),d=a(94615),o=a(39022),m=a(54416),x=a(4229),h=a(4516),u=a(71007),g=a(1243),b=a(57434);function y(){let e=(0,r.useParams)(),s=(0,r.useRouter)(),{selectedClient:a}=(0,c.tH)(),[y,p]=(0,l.useState)(!0),[j,N]=(0,l.useState)(!1),[v,f]=(0,l.useState)(null),[w,C]=(0,l.useState)(null),[k,A]=(0,l.useState)(!1),[S,E]=(0,l.useState)({title:"",locations:[""],primaryContacts:[""],emergencyContacts:[""],onboardingDetails:"",notes:""});(0,l.useEffect)(()=>{e.id&&z(e.id)},[e.id]);let z=async e=>{try{p(!0);let{data:s,error:a}=await n.N.from("organizations").select("*").eq("id",e).single();if(a)throw a;f(s),E(e=>({...e,title:s.name||""}))}catch(e){}finally{p(!1)}},L=a=>{a.href&&("/"===a.href?s.push("/"):s.push("/organizations/".concat(e.id).concat(a.href)))},P=(e,s)=>{E(a=>({...a,[e]:s}))},_=(e,s,a)=>{E(t=>({...t,[e]:t[e].map((e,t)=>t===s?a:e)}))},O=e=>{E(s=>({...s,[e]:[...s[e],""]}))},D=(e,s)=>{E(a=>({...a,[e]:a[e].filter((e,a)=>a!==s)}))},H=async()=>{try{if(N(!0),C(null),A(!1),!S.title.trim())throw Error("Title is required");await new Promise(e=>setTimeout(e,1e3)),A(!0),setTimeout(()=>{s.push("/organizations/".concat(e.id,"/site-summary-legacy"))},1500)}catch(e){C(e.message||"Failed to save site summary")}finally{N(!1)}},M=()=>{s.push("/organizations/".concat(e.id,"/site-summary-legacy"))};return y?(0,t.jsxs)("div",{className:"min-h-screen bg-gray-900 text-white",children:[(0,t.jsx)(d.default,{currentPage:"Organizations"}),(0,t.jsxs)("div",{className:"flex",children:[(0,t.jsx)(i.A,{onItemClick:L}),(0,t.jsx)("div",{className:"flex-1 p-6",children:(0,t.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,t.jsx)("div",{className:"text-gray-400",children:"Loading..."})})})]})]}):(0,t.jsxs)("div",{className:"min-h-screen bg-gray-900 text-white",children:[(0,t.jsx)(d.default,{currentPage:"Organizations"}),(0,t.jsxs)("div",{className:"flex",children:[(0,t.jsx)(i.A,{onItemClick:L}),(0,t.jsx)("div",{className:"flex-1",children:(0,t.jsxs)("div",{className:"p-6",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-gray-400 mb-4",children:[(0,t.jsx)("span",{children:null==v?void 0:v.name}),(0,t.jsx)("span",{children:"/"}),(0,t.jsx)("span",{children:"Site Summary (Legacy)"}),(0,t.jsx)("span",{children:"/"}),(0,t.jsx)("span",{className:"text-white",children:"New"})]}),k&&(0,t.jsx)("div",{className:"mb-4 p-4 bg-green-900/50 border border-green-500 rounded-lg",children:(0,t.jsx)("div",{className:"text-green-400 text-sm",children:"✅ Site Summary (Legacy) saved successfully! Redirecting..."})}),w&&(0,t.jsx)("div",{className:"mb-4 p-4 bg-red-900/50 border border-red-500 rounded-lg",children:(0,t.jsxs)("div",{className:"text-red-400 text-sm",children:["❌ ",w]})}),(0,t.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,t.jsx)("div",{className:"w-12 h-12 bg-green-600 rounded-full flex items-center justify-center",children:(0,t.jsx)(o.A,{className:"w-6 h-6 text-white"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-semibold",children:"New Site Summary (Legacy)"}),(0,t.jsxs)("div",{className:"text-sm text-gray-400",children:["Create a new legacy site summary for ",null==v?void 0:v.name]})]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsxs)("button",{onClick:M,disabled:j,className:"flex items-center space-x-2 bg-gray-600 hover:bg-gray-700 disabled:bg-gray-700 px-4 py-2 rounded text-sm",children:[(0,t.jsx)(m.A,{className:"w-4 h-4"}),(0,t.jsx)("span",{children:"Cancel"})]}),(0,t.jsxs)("button",{onClick:H,disabled:j||!S.title.trim(),className:"flex items-center space-x-2 bg-green-600 hover:bg-green-700 disabled:bg-gray-600 disabled:cursor-not-allowed px-4 py-2 rounded text-sm",children:[(0,t.jsx)(x.A,{className:"w-4 h-4"}),(0,t.jsx)("span",{children:j?"Saving...":"Save"})]})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-4 gap-6",children:[(0,t.jsxs)("div",{className:"col-span-3 space-y-6",children:[(0,t.jsxs)("div",{className:"bg-gray-800 rounded-lg p-6",children:[(0,t.jsx)("h2",{className:"text-lg font-medium mb-4",children:"Title"}),(0,t.jsx)("input",{type:"text",value:S.title,onChange:e=>P("title",e.target.value),placeholder:"Enter site summary title...",className:"w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-white placeholder-gray-400 focus:outline-none focus:border-blue-500"})]}),(0,t.jsxs)("div",{className:"bg-gray-800 rounded-lg p-6",children:[(0,t.jsx)("h2",{className:"text-lg font-medium mb-4",children:"Client Contacts"}),(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsx)("h3",{className:"text-md font-medium text-blue-400 mb-3",children:"Locations"}),S.locations.map((e,s)=>(0,t.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,t.jsx)(h.A,{className:"w-4 h-4 text-gray-400"}),(0,t.jsx)("input",{type:"text",value:e,onChange:e=>_("locations",s,e.target.value),placeholder:"Enter location...",className:"flex-1 bg-gray-700 border border-gray-600 rounded px-3 py-1 text-sm text-white placeholder-gray-400 focus:outline-none focus:border-blue-500"}),S.locations.length>1&&(0,t.jsx)("button",{onClick:()=>D("locations",s),className:"text-red-400 hover:text-red-300",children:(0,t.jsx)(m.A,{className:"w-4 h-4"})})]},s)),(0,t.jsx)("button",{onClick:()=>O("locations"),className:"text-blue-400 hover:text-blue-300 text-sm",children:"+ Add Location"})]}),(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsx)("h3",{className:"text-md font-medium text-blue-400 mb-3",children:"Primary Contacts"}),S.primaryContacts.map((e,s)=>(0,t.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,t.jsx)(u.A,{className:"w-4 h-4 text-gray-400"}),(0,t.jsx)("input",{type:"text",value:e,onChange:e=>_("primaryContacts",s,e.target.value),placeholder:"Enter primary contact...",className:"flex-1 bg-gray-700 border border-gray-600 rounded px-3 py-1 text-sm text-white placeholder-gray-400 focus:outline-none focus:border-blue-500"}),S.primaryContacts.length>1&&(0,t.jsx)("button",{onClick:()=>D("primaryContacts",s),className:"text-red-400 hover:text-red-300",children:(0,t.jsx)(m.A,{className:"w-4 h-4"})})]},s)),(0,t.jsx)("button",{onClick:()=>O("primaryContacts"),className:"text-blue-400 hover:text-blue-300 text-sm",children:"+ Add Primary Contact"})]}),(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsx)("h3",{className:"text-md font-medium text-blue-400 mb-3",children:"Emergency Contacts"}),S.emergencyContacts.map((e,s)=>(0,t.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,t.jsx)(g.A,{className:"w-4 h-4 text-red-400"}),(0,t.jsx)("input",{type:"text",value:e,onChange:e=>_("emergencyContacts",s,e.target.value),placeholder:"Enter emergency contact...",className:"flex-1 bg-gray-700 border border-gray-600 rounded px-3 py-1 text-sm text-white placeholder-gray-400 focus:outline-none focus:border-blue-500"}),S.emergencyContacts.length>1&&(0,t.jsx)("button",{onClick:()=>D("emergencyContacts",s),className:"text-red-400 hover:text-red-300",children:(0,t.jsx)(m.A,{className:"w-4 h-4"})})]},s)),(0,t.jsx)("button",{onClick:()=>O("emergencyContacts"),className:"text-blue-400 hover:text-blue-300 text-sm",children:"+ Add Emergency Contact"})]})]}),(0,t.jsxs)("div",{className:"bg-gray-800 rounded-lg p-6",children:[(0,t.jsx)("h2",{className:"text-lg font-medium mb-4",children:"Initial Onboarding Details"}),(0,t.jsx)("textarea",{value:S.onboardingDetails,onChange:e=>P("onboardingDetails",e.target.value),placeholder:"Enter onboarding details...",rows:4,className:"w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-white placeholder-gray-400 focus:outline-none focus:border-blue-500"})]}),(0,t.jsxs)("div",{className:"bg-gray-800 rounded-lg p-6",children:[(0,t.jsx)("h2",{className:"text-lg font-medium mb-4",children:"Notes"}),(0,t.jsx)("textarea",{value:S.notes,onChange:e=>P("notes",e.target.value),placeholder:"Enter additional notes...",rows:3,className:"w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-white placeholder-gray-400 focus:outline-none focus:border-blue-500"})]})]}),(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"bg-gray-800 rounded-lg p-4",children:[(0,t.jsx)("h3",{className:"text-sm font-medium text-gray-300 mb-3",children:"Actions"}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("button",{onClick:H,disabled:j||!S.title.trim(),className:"w-full flex items-center justify-center space-x-2 bg-green-600 hover:bg-green-700 disabled:bg-gray-600 disabled:cursor-not-allowed px-3 py-2 rounded text-sm",children:[(0,t.jsx)(x.A,{className:"w-4 h-4"}),(0,t.jsx)("span",{children:j?"Saving...":"Save Site Summary"})]}),(0,t.jsxs)("button",{onClick:M,disabled:j,className:"w-full flex items-center justify-center space-x-2 bg-gray-600 hover:bg-gray-700 disabled:bg-gray-700 px-3 py-2 rounded text-sm",children:[(0,t.jsx)(m.A,{className:"w-4 h-4"}),(0,t.jsx)("span",{children:"Cancel"})]})]})]}),(0,t.jsxs)("div",{className:"bg-gray-800 rounded-lg p-4",children:[(0,t.jsxs)("h3",{className:"text-sm font-medium text-gray-300 mb-3 flex items-center",children:[(0,t.jsx)(b.A,{className:"w-4 h-4 mr-2"}),"Help"]}),(0,t.jsxs)("div",{className:"text-xs text-gray-400 space-y-2",children:[(0,t.jsx)("p",{children:"Site Summary (Legacy) provides a comprehensive overview of client contact information and onboarding details."}),(0,t.jsx)("p",{children:"Fill in all relevant fields to ensure complete documentation."})]})]})]})]})]})})]})]})}}},e=>{e.O(0,[5647,6441,7365,3930,8441,5964,7358],()=>e(e.s=25681)),_N_E=e.O()}]);