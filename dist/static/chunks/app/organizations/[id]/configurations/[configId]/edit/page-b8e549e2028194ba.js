(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7152],{4229:(e,a,t)=>{"use strict";t.d(a,{A:()=>l});let l=(0,t(19946).A)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]])},22019:(e,a,t)=>{"use strict";t.d(a,{A:()=>m});var l=t(95155),s=t(12115),r=t(35695),n=t(42099),i=t(94631),c=t(35169),d=t(54416),o=t(4229);function m(e){let{title:a,tableName:t,itemId:m,organizationId:u,fields:h,redirectPath:p,onCancel:x}=e,b=(0,r.useRouter)(),[y,g]=(0,s.useState)({}),[v,f]=(0,s.useState)(!0),[j,N]=(0,s.useState)(!1),[k,w]=(0,s.useState)(null);(0,s.useEffect)(()=>{A()},[m]);let A=async()=>{try{f(!0);let{data:e,error:a}=await n.N.from(t).select("*").eq("id",m).single();if(a)throw a;g(e||{})}catch(e){w("Failed to load item data")}finally{f(!1)}},C=(e,a)=>{g(t=>({...t,[e]:a}))},P=async e=>{e.preventDefault();try{N(!0),w(null);let e=h.filter(e=>e.required&&!y[e.name]).map(e=>e.label);if(e.length>0)return void w("Please fill in required fields: ".concat(e.join(", ")));let{id:a,created_at:l,updated_at:s,...r}=y,{data:i,error:c}=await n.N.from(t).update(r).eq("id",m).select();if(c)throw c;b.push(p)}catch(a){let e="Failed to update item. Please try again.";(null==a?void 0:a.message)&&(e=a.message.includes("relation")&&a.message.includes("does not exist")?'Database table "'.concat(t,'" does not exist. Please contact support.'):a.message.includes("duplicate key")?"An item with this information already exists.":a.message.includes("violates check constraint")?"Invalid data provided. Please check your input.":a.message.includes("violates foreign key constraint")?"Invalid reference data. Please check your selections.":"Error: ".concat(a.message)),w(e)}finally{N(!1)}},S=()=>{x?x():b.push(p)};return v?(0,l.jsx)("div",{className:"min-h-screen bg-gray-900 text-white",children:(0,l.jsx)("div",{className:"p-6",children:(0,l.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,l.jsxs)("div",{className:"flex items-center space-x-2 text-gray-400",children:[(0,l.jsx)(i.A,{className:"w-5 h-5 animate-spin"}),(0,l.jsx)("span",{children:"Loading..."})]})})})}):(0,l.jsx)("div",{className:"min-h-screen bg-gray-900 text-white",children:(0,l.jsxs)("div",{className:"p-6",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,l.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,l.jsxs)("button",{onClick:S,className:"flex items-center space-x-2 text-gray-400 hover:text-white",children:[(0,l.jsx)(c.A,{className:"w-5 h-5"}),(0,l.jsx)("span",{children:"Back"})]}),(0,l.jsx)("h1",{className:"text-2xl font-semibold",children:a})]}),(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsxs)("button",{onClick:S,className:"flex items-center space-x-2 bg-gray-700 hover:bg-gray-600 px-4 py-2 rounded text-sm",children:[(0,l.jsx)(d.A,{className:"w-4 h-4"}),(0,l.jsx)("span",{children:"Cancel"})]}),(0,l.jsxs)("button",{onClick:P,disabled:j,className:"flex items-center space-x-2 bg-blue-600 hover:bg-blue-700 disabled:bg-blue-800 px-4 py-2 rounded text-sm",children:[(0,l.jsx)(o.A,{className:"w-4 h-4"}),(0,l.jsx)("span",{children:j?"Saving...":"Save Changes"})]})]})]}),k&&(0,l.jsx)("div",{className:"bg-red-900/20 border border-red-500 rounded-lg p-4 mb-6",children:(0,l.jsx)("p",{className:"text-red-400",children:k})}),(0,l.jsx)("div",{className:"bg-gray-800 rounded-lg p-6",children:(0,l.jsx)("form",{onSubmit:P,className:"space-y-6",children:(0,l.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:h.map(e=>(0,l.jsxs)("div",{className:"textarea"===e.type?"md:col-span-2":"",children:[(0,l.jsxs)("label",{htmlFor:e.name,className:"block text-sm font-medium text-gray-300 mb-2",children:[e.label,e.required&&(0,l.jsx)("span",{className:"text-red-400 ml-1",children:"*"})]}),(e=>{let a={id:e.name,name:e.name,required:e.required,className:"w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:e.placeholder};switch(e.type){case"textarea":return(0,l.jsx)("textarea",{...a,rows:e.rows||4,value:y[e.name]||"",onChange:a=>C(e.name,a.target.value)});case"select":var t;return(0,l.jsxs)("select",{...a,value:y[e.name]||"",onChange:a=>C(e.name,a.target.value),children:[(0,l.jsxs)("option",{value:"",children:["Select ",e.label]}),null==(t=e.options)?void 0:t.map(e=>(0,l.jsx)("option",{value:e.value,children:e.label},e.value))]});case"checkbox":return(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)("input",{type:"checkbox",id:e.name,name:e.name,checked:y[e.name]||!1,onChange:a=>C(e.name,a.target.checked),className:"w-4 h-4 text-blue-600 bg-gray-700 border-gray-600 rounded focus:ring-blue-500"}),(0,l.jsx)("label",{htmlFor:e.name,className:"ml-2 text-sm text-gray-300",children:e.label})]});default:return(0,l.jsx)("input",{...a,type:e.type,value:y[e.name]||"",onChange:a=>C(e.name,a.target.value)})}})(e)]},e.name))})})})]})})}},27002:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>c});var l=t(95155),s=t(35695),r=t(22019),n=t(94615),i=t(95060);function c(){let e=(0,s.useParams)();return(0,l.jsxs)("div",{className:"min-h-screen bg-gray-900 text-white",children:[(0,l.jsx)(n.default,{currentPage:"Organizations"}),(0,l.jsxs)("div",{className:"flex",children:[(0,l.jsx)(i.A,{onItemClick:e=>{}}),(0,l.jsx)("div",{className:"flex-1",children:(0,l.jsx)(r.A,{title:"Edit Configuration",tableName:"configurations",itemId:e.configId,organizationId:e.id,fields:[{name:"name",label:"Configuration Name",type:"text",required:!0,placeholder:"Enter configuration name"},{name:"configuration_type",label:"Type",type:"select",required:!0,options:[{value:"server",label:"Server"},{value:"workstation",label:"Workstation"},{value:"network_device",label:"Network Device"},{value:"security_appliance",label:"Security Appliance"},{value:"storage",label:"Storage"},{value:"virtualization",label:"Virtualization"},{value:"other",label:"Other"}]},{name:"operating_system",label:"Operating System",type:"text",placeholder:"e.g., Windows Server 2022, Ubuntu 22.04"},{name:"primary_ip",label:"Primary IP Address",type:"text",placeholder:"192.168.1.100"},{name:"serial_number",label:"Serial Number",type:"text",placeholder:"Enter serial number"},{name:"manufacturer",label:"Manufacturer",type:"text",placeholder:"e.g., Dell, HP, Cisco"},{name:"model",label:"Model",type:"text",placeholder:"e.g., PowerEdge R750, ProLiant DL380"},{name:"location",label:"Location",type:"text",placeholder:"Physical location"},{name:"contact_person",label:"Contact Person",type:"text",placeholder:"Responsible person"},{name:"warranty_expiry",label:"Warranty Expiry",type:"date"},{name:"status",label:"Status",type:"select",required:!0,options:[{value:"active",label:"Active"},{value:"inactive",label:"Inactive"},{value:"maintenance",label:"Maintenance"},{value:"decommissioned",label:"Decommissioned"}]},{name:"description",label:"Description",type:"textarea",placeholder:"Additional details about this configuration...",rows:4}],redirectPath:"/organizations/".concat(e.id,"/configurations")})})]})]})}},35169:(e,a,t)=>{"use strict";t.d(a,{A:()=>l});let l=(0,t(19946).A)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},54416:(e,a,t)=>{"use strict";t.d(a,{A:()=>l});let l=(0,t(19946).A)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},94631:(e,a,t)=>{"use strict";t.d(a,{A:()=>l});let l=(0,t(19946).A)("loader",[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]])},95143:(e,a,t)=>{Promise.resolve().then(t.bind(t,27002))}},e=>{e.O(0,[5647,6441,7365,3930,8441,5964,7358],()=>e(e.s=95143)),_N_E=e.O()}]);