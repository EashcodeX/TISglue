(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9230],{4229:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(19946).A)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]])},12947:(e,s,a)=>{Promise.resolve().then(a.bind(a,85168))},13717:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(19946).A)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]])},48136:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(19946).A)("building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]])},54416:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(19946).A)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},85168:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>N});var t=a(95155),r=a(12115),c=a(35695),l=a(42099),i=a(89006),n=a(95060),d=a(94615),o=a(14186),x=a(54416),m=a(4229),h=a(13717),g=a(48136),p=a(17580),u=a(69803),y=a(75525),b=a(1243),j=a(57434);function N(){let e=(0,c.useParams)(),s=(0,c.useRouter)(),{selectedClient:a}=(0,i.tH)(),[N,f]=(0,r.useState)(null),[_,v]=(0,r.useState)(null),[w,k]=(0,r.useState)(!0),[A,C]=(0,r.useState)(!1),[M,S]=(0,r.useState)(!1),[P,z]=(0,r.useState)({site_name:"",primary_contact:"",primary_phone:"",secondary_contact:"",secondary_phone:"",access_instructions:"",security_codes:"",key_location:"",alarm_codes:"",emergency_procedures:"",building_hours:"",after_hours_contact:"",notes:""});(0,r.useEffect)(()=>{E(),H()},[e.id]);let E=async()=>{try{let{data:s,error:a}=await l.N.from("organizations").select("*").eq("id",e.id).single();if(a)throw a;f(s)}catch(e){}},H=async()=>{try{k(!0);let{data:s,error:a}=await l.N.from("after_hour_access").select("*").eq("organization_id",e.id).single();s&&(v(s),z({site_name:s.site_name||"",primary_contact:s.primary_contact||"",primary_phone:s.primary_phone||"",secondary_contact:s.secondary_contact||"",secondary_phone:s.secondary_phone||"",access_instructions:s.access_instructions||"",security_codes:s.security_codes||"",key_location:s.key_location||"",alarm_codes:s.alarm_codes||"",emergency_procedures:s.emergency_procedures||"",building_hours:s.building_hours||"",after_hours_contact:s.after_hours_contact||"",notes:s.notes||""}))}catch(e){}finally{k(!1)}},I=async()=>{try{S(!0);let s={organization_id:e.id,...P};if(_){let{error:e}=await l.N.from("after_hour_access").update(s).eq("id",_.id);if(e)throw e}else{let{error:e}=await l.N.from("after_hour_access").insert([s]);if(e)throw e}await H(),C(!1)}catch(e){}finally{S(!1)}},q=(e,s)=>{z(a=>({...a,[e]:s}))},O=a=>{a.href&&("/"===a.href?s.push("/"):s.push("/organizations/".concat(e.id).concat(a.href)))};return w?(0,t.jsxs)("div",{className:"min-h-screen bg-gray-900 text-white",children:[(0,t.jsx)(d.default,{currentPage:"Organizations"}),(0,t.jsxs)("div",{className:"flex",children:[(0,t.jsx)(n.A,{onItemClick:O}),(0,t.jsx)("div",{className:"flex-1 p-6",children:(0,t.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,t.jsx)("div",{className:"text-gray-400",children:"Loading after hour access information..."})})})]})]}):(0,t.jsxs)("div",{className:"min-h-screen bg-gray-900 text-white",children:[(0,t.jsx)(d.default,{currentPage:"Organizations"}),(0,t.jsxs)("div",{className:"flex",children:[(0,t.jsx)(n.A,{onItemClick:O}),(0,t.jsxs)("div",{className:"flex-1 p-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,t.jsx)("div",{className:"w-12 h-12 bg-orange-600 rounded-full flex items-center justify-center",children:(0,t.jsx)(o.A,{className:"w-6 h-6 text-white"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-semibold",children:"After Hour and Building/Make Ready Access"}),(0,t.jsx)("div",{className:"text-sm text-gray-400",children:null==N?void 0:N.name})]})]}),(0,t.jsx)("div",{className:"flex items-center space-x-2",children:A?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("button",{onClick:()=>C(!1),className:"flex items-center space-x-2 bg-gray-700 hover:bg-gray-600 px-4 py-2 rounded text-sm",children:[(0,t.jsx)(x.A,{className:"w-4 h-4"}),(0,t.jsx)("span",{children:"Cancel"})]}),(0,t.jsxs)("button",{onClick:I,disabled:M,className:"flex items-center space-x-2 bg-green-600 hover:bg-green-700 disabled:bg-green-800 px-4 py-2 rounded text-sm",children:[(0,t.jsx)(m.A,{className:"w-4 h-4"}),(0,t.jsx)("span",{children:M?"Saving...":"Save"})]})]}):(0,t.jsxs)("button",{onClick:()=>C(!0),className:"flex items-center space-x-2 bg-blue-600 hover:bg-blue-700 px-4 py-2 rounded text-sm",children:[(0,t.jsx)(h.A,{className:"w-4 h-4"}),(0,t.jsx)("span",{children:"Edit"})]})})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{className:"bg-gray-800 rounded-lg p-6",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2 mb-4",children:[(0,t.jsx)(g.A,{className:"w-5 h-5 text-blue-400"}),(0,t.jsx)("h2",{className:"text-lg font-semibold",children:"Site Information"})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Site Name"}),A?(0,t.jsx)("input",{type:"text",value:P.site_name,onChange:e=>q("site_name",e.target.value),className:"w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-white"}):(0,t.jsx)("p",{className:"text-gray-300",children:P.site_name||"Not specified"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Building Hours"}),A?(0,t.jsx)("input",{type:"text",value:P.building_hours,onChange:e=>q("building_hours",e.target.value),className:"w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-white",placeholder:"e.g., Monday-Friday 8:00 AM - 6:00 PM"}):(0,t.jsx)("p",{className:"text-gray-300",children:P.building_hours||"Not specified"})]})]})]}),(0,t.jsxs)("div",{className:"bg-gray-800 rounded-lg p-6",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2 mb-4",children:[(0,t.jsx)(p.A,{className:"w-5 h-5 text-green-400"}),(0,t.jsx)("h2",{className:"text-lg font-semibold",children:"Contact Information"})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Primary Contact"}),A?(0,t.jsx)("input",{type:"text",value:P.primary_contact,onChange:e=>q("primary_contact",e.target.value),className:"w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-white"}):(0,t.jsx)("p",{className:"text-gray-300",children:P.primary_contact||"Not specified"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Primary Phone"}),A?(0,t.jsx)("input",{type:"tel",value:P.primary_phone,onChange:e=>q("primary_phone",e.target.value),className:"w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-white"}):(0,t.jsx)("p",{className:"text-gray-300",children:P.primary_phone||"Not specified"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"After Hours Contact"}),A?(0,t.jsx)("input",{type:"text",value:P.after_hours_contact,onChange:e=>q("after_hours_contact",e.target.value),className:"w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-white"}):(0,t.jsx)("p",{className:"text-gray-300",children:P.after_hours_contact||"Not specified"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Secondary Contact"}),A?(0,t.jsx)("input",{type:"text",value:P.secondary_contact,onChange:e=>q("secondary_contact",e.target.value),className:"w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-white"}):(0,t.jsx)("p",{className:"text-gray-300",children:P.secondary_contact||"Not specified"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Secondary Phone"}),A?(0,t.jsx)("input",{type:"tel",value:P.secondary_phone,onChange:e=>q("secondary_phone",e.target.value),className:"w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-white"}):(0,t.jsx)("p",{className:"text-gray-300",children:P.secondary_phone||"Not specified"})]})]})]}),(0,t.jsxs)("div",{className:"bg-gray-800 rounded-lg p-6 lg:col-span-2",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2 mb-4",children:[(0,t.jsx)(u.A,{className:"w-5 h-5 text-yellow-400"}),(0,t.jsx)("h2",{className:"text-lg font-semibold",children:"Access Instructions"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Access Instructions"}),A?(0,t.jsx)("textarea",{value:P.access_instructions,onChange:e=>q("access_instructions",e.target.value),className:"w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-white",rows:4,placeholder:"Detailed instructions for building access..."}):(0,t.jsx)("p",{className:"text-gray-300 whitespace-pre-wrap",children:P.access_instructions||"Not specified"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Key Location"}),A?(0,t.jsx)("textarea",{value:P.key_location,onChange:e=>q("key_location",e.target.value),className:"w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-white",rows:4,placeholder:"Where keys are located..."}):(0,t.jsx)("p",{className:"text-gray-300 whitespace-pre-wrap",children:P.key_location||"Not specified"})]})]})]}),(0,t.jsxs)("div",{className:"bg-gray-800 rounded-lg p-6 lg:col-span-2",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2 mb-4",children:[(0,t.jsx)(y.A,{className:"w-5 h-5 text-red-400"}),(0,t.jsx)("h2",{className:"text-lg font-semibold",children:"Security Information"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Security Codes"}),A?(0,t.jsx)("textarea",{value:P.security_codes,onChange:e=>q("security_codes",e.target.value),className:"w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-white",rows:3,placeholder:"Door codes, gate codes, etc..."}):(0,t.jsx)("p",{className:"text-gray-300 whitespace-pre-wrap",children:P.security_codes||"Not specified"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Alarm Codes"}),A?(0,t.jsx)("textarea",{value:P.alarm_codes,onChange:e=>q("alarm_codes",e.target.value),className:"w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-white",rows:3,placeholder:"Alarm system codes and procedures..."}):(0,t.jsx)("p",{className:"text-gray-300 whitespace-pre-wrap",children:P.alarm_codes||"Not specified"})]})]})]}),(0,t.jsxs)("div",{className:"bg-gray-800 rounded-lg p-6 lg:col-span-2",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2 mb-4",children:[(0,t.jsx)(b.A,{className:"w-5 h-5 text-orange-400"}),(0,t.jsx)("h2",{className:"text-lg font-semibold",children:"Emergency Procedures"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Emergency Procedures"}),A?(0,t.jsx)("textarea",{value:P.emergency_procedures,onChange:e=>q("emergency_procedures",e.target.value),className:"w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-white",rows:4,placeholder:"Emergency contact procedures, evacuation plans, etc..."}):(0,t.jsx)("p",{className:"text-gray-300 whitespace-pre-wrap",children:P.emergency_procedures||"Not specified"})]})]}),(0,t.jsxs)("div",{className:"bg-gray-800 rounded-lg p-6 lg:col-span-2",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2 mb-4",children:[(0,t.jsx)(j.A,{className:"w-5 h-5 text-gray-400"}),(0,t.jsx)("h2",{className:"text-lg font-semibold",children:"Additional Notes"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Notes"}),A?(0,t.jsx)("textarea",{value:P.notes,onChange:e=>q("notes",e.target.value),className:"w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-white",rows:3,placeholder:"Additional notes and information..."}):(0,t.jsx)("p",{className:"text-gray-300 whitespace-pre-wrap",children:P.notes||"No additional notes"})]})]})]})]})]})]})}}},e=>{e.O(0,[5647,6441,7365,3930,8441,5964,7358],()=>e(e.s=12947)),_N_E=e.O()}]);