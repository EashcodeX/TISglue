(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8974],{36657:(e,t,s)=>{Promise.resolve().then(s.bind(s,97861))},40283:(e,t,s)=>{"use strict";s.d(t,{AuthProvider:()=>n,h:()=>l});var a=s(95155),i=s(12115),r=s(42099);let c=(0,i.createContext)(void 0);function n(e){let{children:t}=e,[s,n]=(0,i.useState)(null),[l,o]=(0,i.useState)(null),[d,m]=(0,i.useState)(!0);(0,i.useEffect)(()=>{(async()=>{var e;let{data:{session:t}}=await r.N.auth.getSession();o(t),n(null!=(e=null==t?void 0:t.user)?e:null),m(!1)})();let{data:{subscription:e}}=r.N.auth.onAuthStateChange(async(e,t)=>{var s;o(t),n(null!=(s=null==t?void 0:t.user)?s:null),m(!1),(null==t?void 0:t.user)&&"SIGNED_IN"===e&&await x(t.user)});return()=>e.unsubscribe()},[]);let x=async e=>{try{let{data:a}=await r.N.from("users").select("id").eq("id",e.id).single();if(a)await r.N.from("users").update({last_login_at:new Date().toISOString()}).eq("id",e.id);else{var t,s;await r.N.from("users").insert({id:e.id,email:e.email,full_name:(null==(t=e.user_metadata)?void 0:t.full_name)||"",avatar_url:(null==(s=e.user_metadata)?void 0:s.avatar_url)||"",role:"user",status:"active",last_login_at:new Date().toISOString()})}}catch(e){}},u=async(e,t)=>{let{error:s}=await r.N.auth.signInWithPassword({email:e,password:t});return{error:s}},h=async(e,t,s)=>{let{error:a}=await r.N.auth.signUp({email:e,password:t,options:{data:s}});return{error:a}},g=async()=>{await r.N.auth.signOut()},p=async e=>{let{error:t}=await r.N.auth.resetPasswordForEmail(e,{redirectTo:"".concat(window.location.origin,"/auth/reset-password")});return{error:t}};return(0,a.jsx)(c.Provider,{value:{user:s,session:l,loading:d,signIn:u,signUp:h,signOut:g,resetPassword:p},children:t})}function l(){let e=(0,i.useContext)(c);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},42099:(e,t,s)=>{"use strict";s.d(t,{N:()=>a});let a=(0,s(55647).UU)("https://yhznjxfzpthmyyhbhihp.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inloem5qeGZ6cHRobXl5aGJoaWhwIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQyNDE0MzcsImV4cCI6MjA2OTgxNzQzN30.BlP9YoilaPopQgkZXZa-_WJPUIjnX9nTyYspaBV0Cqc")},89006:(e,t,s)=>{"use strict";s.d(t,{ClientProvider:()=>c,g6:()=>l,s2:()=>o,tH:()=>n});var a=s(95155),i=s(12115);let r=(0,i.createContext)(void 0);function c(e){let{children:t}=e,[s,c]=(0,i.useState)(null);return(0,i.useEffect)(()=>{let e=localStorage.getItem("selectedClient");if(e)try{c(JSON.parse(e))}catch(e){localStorage.removeItem("selectedClient")}},[]),(0,i.useEffect)(()=>{s?localStorage.setItem("selectedClient",JSON.stringify(s)):localStorage.removeItem("selectedClient")},[s]),(0,a.jsx)(r.Provider,{value:{selectedClient:s,setSelectedClient:c,isClientSelected:!!s,clearSelectedClient:()=>{c(null)}},children:t})}function n(){let e=(0,i.useContext)(r);if(void 0===e)throw Error("useClient must be used within a ClientProvider");return e}function l(e){return e.split(" ").map(e=>e[0]).join("").toUpperCase().slice(0,2)}function o(e){let t=["bg-blue-500","bg-green-500","bg-purple-500","bg-red-500","bg-yellow-500","bg-indigo-500","bg-pink-500","bg-gray-500"],s=e.length%t.length;return t[s]}},94615:(e,t,s)=>{"use strict";s.d(t,{default:()=>f});var a=s(95155),i=s(6874),r=s.n(i),c=s(35695),n=s(89006),l=s(40283),o=s(74783),d=s(13052),m=s(47924),x=s(381),u=s(23861),h=s(79772),g=s(34835),p=s(71007);function f(e){var t,s;let{currentPage:i,onMenuToggle:f}=e,y=(0,c.usePathname)();(0,c.useRouter)();let{selectedClient:N}=(0,n.tH)(),{user:w,signOut:v}=(0,l.h)(),j=[{label:"Dashboard",href:"/",isActive:"/"===y},{label:"Organizations",href:"/organizations",isActive:y.startsWith("/organizations")},{label:"Reports",href:"/reports",isActive:"/reports"===y},{label:"API Docs",href:"/api-docs",isActive:"/api-docs"===y},{label:"Personal",href:"/personal",isActive:"/personal"===y},{label:"Global",href:"/global",isActive:"/global"===y},{label:"GlueConnect",href:"/glueconnect",isActive:"/glueconnect"===y}],b=n.g6,_=n.s2;return(0,a.jsx)("header",{className:"bg-gray-800 border-b border-gray-700",children:(0,a.jsxs)("div",{className:"flex items-center justify-between px-4 sm:px-6 py-3",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4 sm:space-x-6",children:[(0,a.jsx)("button",{onClick:f,className:"lg:hidden p-2 text-gray-400 hover:text-white transition-colors",children:(0,a.jsx)(o.A,{className:"w-5 h-5"})}),(0,a.jsxs)(r(),{href:"/",className:"flex items-center space-x-2",children:[(0,a.jsx)("div",{className:"w-8 h-8 bg-orange-500 rounded flex items-center justify-center text-sm font-bold",children:"IT"}),(0,a.jsx)("span",{className:"text-sm text-gray-300",children:".net"})]}),(0,a.jsx)("nav",{className:"hidden md:flex space-x-6",children:j.map(e=>(0,a.jsx)(r(),{href:e.href,className:"px-3 py-1 rounded text-sm transition-colors ".concat(e.isActive?"text-white bg-gray-700":"text-gray-300 hover:text-white hover:bg-gray-700"),children:e.label},e.label))}),N&&y.startsWith("/organizations/")&&(0,a.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-gray-300",children:[(0,a.jsx)(d.A,{className:"w-4 h-4"}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("div",{className:"w-6 h-6 ".concat(_(N.name)," rounded-full flex items-center justify-center"),children:(0,a.jsx)("span",{className:"text-white font-bold text-xs",children:b(N.name)})}),(0,a.jsx)("span",{children:N.name})]})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2 sm:space-x-4",children:[(0,a.jsx)("button",{className:"p-2 text-gray-400 hover:text-white transition-colors",children:(0,a.jsx)(m.A,{className:"w-5 h-5"})}),(0,a.jsx)("button",{className:"hidden sm:block p-2 text-gray-400 hover:text-white transition-colors",children:(0,a.jsx)(x.A,{className:"w-5 h-5"})}),(0,a.jsx)("button",{className:"hidden sm:block p-2 text-gray-400 hover:text-white transition-colors",children:(0,a.jsx)(u.A,{className:"w-5 h-5"})}),w?(0,a.jsxs)("div",{className:"relative group",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2 cursor-pointer",children:[(0,a.jsx)("div",{className:"w-8 h-8 bg-blue-600 rounded-full flex items-center justify-center",children:(0,a.jsx)(h.A,{className:"w-4 h-4 text-white"})}),(0,a.jsx)("span",{className:"hidden sm:block text-sm text-gray-300",children:(null==(t=w.user_metadata)?void 0:t.full_name)||w.email})]}),(0,a.jsx)("div",{className:"absolute right-0 mt-2 w-48 bg-gray-800 border border-gray-700 rounded-lg shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-50",children:(0,a.jsxs)("div",{className:"py-2",children:[(0,a.jsxs)("div",{className:"px-4 py-2 border-b border-gray-700",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-white",children:(null==(s=w.user_metadata)?void 0:s.full_name)||"User"}),(0,a.jsx)("p",{className:"text-xs text-gray-400",children:w.email})]}),(0,a.jsxs)("button",{onClick:()=>v(),className:"w-full text-left px-4 py-2 text-sm text-gray-300 hover:bg-gray-700 hover:text-white flex items-center space-x-2",children:[(0,a.jsx)(g.A,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:"Sign Out"})]})]})})]}):(0,a.jsxs)(r(),{href:"/auth/login",className:"flex items-center space-x-2 px-3 py-2 bg-blue-600 hover:bg-blue-700 rounded-lg text-sm text-white transition-colors",children:[(0,a.jsx)(p.A,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:"Sign In"})]})]})]})})}},97861:(e,t,s)=>{"use strict";s.d(t,{default:()=>O});var a=s(95155),i=s(12115),r=s(35695),c=s(42099);class n{static async getDashboardData(e){let[t,s,a,i]=await Promise.all([this.getStats(e),this.getRecentActivity(e),this.getFavorites(e),this.getAlerts(e)]);return{stats:t,recentActivity:s,favorites:a,alerts:i}}static async getStats(e){try{let t=e?{organization_id:e}:{},[s,a,i,r,n,l,o,d,m,x,u,h,g,p,f,y]=await Promise.all([e?{count:1}:c.N.from("organizations").select("*",{count:"exact",head:!0}),c.N.from("configurations").select("*",{count:"exact",head:!0}).match(t),c.N.from("documents").select("*",{count:"exact",head:!0}).match(t),c.N.from("passwords").select("*",{count:"exact",head:!0}).match(t),c.N.from("domains").select("*",{count:"exact",head:!0}).match(t),c.N.from("contacts").select("*",{count:"exact",head:!0}).match(t),c.N.from("locations").select("*",{count:"exact",head:!0}).match(t),c.N.from("assets").select("*",{count:"exact",head:!0}).match(t),c.N.from("users").select("*",{count:"exact",head:!0}).match(t),c.N.from("known_issues").select("*",{count:"exact",head:!0}).match(t),c.N.from("rfcs").select("*",{count:"exact",head:!0}).match(t),c.N.from("maintenance_windows").select("*",{count:"exact",head:!0}).match(t),c.N.from("warranties").select("*",{count:"exact",head:!0}).match(t),c.N.from("mfa_configurations").select("*",{count:"exact",head:!0}).match(t),c.N.from("networks").select("*",{count:"exact",head:!0}).match(t),c.N.from("ssl_certificates").select("*",{count:"exact",head:!0}).match(t)]),N=new Date,w=new Date(N.getTime()+2592e6),[v,j,b,_]=await Promise.all([c.N.from("ssl_certificates").select("*",{count:"exact",head:!0}).match(t).lte("expiry_date",w.toISOString().split("T")[0]),c.N.from("warranties").select("*",{count:"exact",head:!0}).match(t).lt("warranty_end_date",N.toISOString().split("T")[0]),c.N.from("known_issues").select("*",{count:"exact",head:!0}).match(t).in("status",["open","investigating"]),c.N.from("rfcs").select("*",{count:"exact",head:!0}).match(t).in("status",["submitted","pending"])]);return{organizations:e?1:s.count||0,configurations:a.count||0,documents:i.count||0,passwords:r.count||0,domains:n.count||0,contacts:l.count||0,locations:o.count||0,assets:d.count||0,users:m.count||0,certificates:y.count||0,related_items:0,known_issues:x.count||0,rfcs:u.count||0,maintenance_windows:h.count||0,warranties:g.count||0,mfa_configurations:p.count||0,networks:f.count||0,ssl_certificates:y.count||0,expiring_certificates:v.count||0,expired_warranties:j.count||0,open_issues:b.count||0,pending_rfcs:_.count||0}}catch(e){return{organizations:0,configurations:0,documents:0,passwords:0,domains:0,contacts:0,locations:0,assets:0,users:0,certificates:0,related_items:0,known_issues:0,rfcs:0,maintenance_windows:0,warranties:0,mfa_configurations:0,networks:0,ssl_certificates:0,expiring_certificates:0,expired_warranties:0,open_issues:0,pending_rfcs:0}}}static async getRecentActivity(e){try{let t=[],{data:s}=await c.N.from("configurations").select("id, name, updated_at, organization_id").match(e?{organization_id:e}:{}).order("updated_at",{ascending:!1}).limit(5);null==s||s.forEach(e=>{t.push({id:"config-".concat(e.id),type:"updated",item_type:"configuration",item_name:e.name,item_id:e.id,organization_name:"Organization",user_name:"System User",timestamp:e.updated_at,description:'Configuration "'.concat(e.name,'" was updated')})});let{data:a}=await c.N.from("documents").select("id, name, updated_at, organization_id").match(e?{organization_id:e}:{}).order("updated_at",{ascending:!1}).limit(5);return null==a||a.forEach(e=>{t.push({id:"doc-".concat(e.id),type:"updated",item_type:"document",item_name:e.name||"Untitled Document",item_id:e.id,organization_name:"Organization",user_name:"System User",timestamp:e.updated_at,description:'Document "'.concat(e.name,'" was updated')})}),t.sort((e,t)=>new Date(t.timestamp).getTime()-new Date(e.timestamp).getTime()).slice(0,10)}catch(e){return[]}}static async getFavorites(e){try{let t=c.N.from("favorites").select("*").order("created_at",{ascending:!1});e&&t.eq("organization_id",e);let{data:s,error:a}=await t;if(a)throw a;return s||[]}catch(e){return[]}}static async getAlerts(e){try{let t=[],s=new Date,a=new Date(s.getTime()+2592e6),{data:i}=await c.N.from("ssl_certificates").select("id, domain_name, expiry_date").match(e?{organization_id:e}:{}).lte("expiry_date",a.toISOString().split("T")[0]).gt("expiry_date",s.toISOString().split("T")[0]);null==i||i.forEach(e=>{let a=Math.ceil((new Date(e.expiry_date).getTime()-s.getTime())/864e5);t.push({id:"cert-".concat(e.id),type:"warning",title:"SSL Certificate Expiring Soon",message:"Certificate for ".concat(e.domain_name," expires in ").concat(a," days"),item_type:"ssl_certificate",item_id:e.id,created_at:new Date().toISOString()})});let{data:r}=await c.N.from("warranties").select("id, asset_name, warranty_end_date").match(e?{organization_id:e}:{}).lt("warranty_end_date",s.toISOString().split("T")[0]);null==r||r.forEach(e=>{t.push({id:"warranty-".concat(e.id),type:"error",title:"Warranty Expired",message:"Warranty for ".concat(e.asset_name," has expired"),item_type:"warranty",item_id:e.id,created_at:new Date().toISOString()})});let{data:n}=await c.N.from("known_issues").select("id, title, severity").match(e?{organization_id:e}:{}).eq("severity","critical").in("status",["open","investigating"]);return null==n||n.forEach(e=>{t.push({id:"issue-".concat(e.id),type:"error",title:"Critical Issue Open",message:"Critical issue: ".concat(e.title),item_type:"known_issue",item_id:e.id,created_at:new Date().toISOString()})}),t.slice(0,10)}catch(e){return[]}}static async addFavorite(e){try{let{data:t,error:s}=await c.N.from("favorites").insert([e]).select().single();if(s)throw s;return t}catch(e){return null}}static async removeFavorite(e){try{let{error:t}=await c.N.from("favorites").delete().eq("id",e);if(t)throw t;return!0}catch(e){return!1}}static async toggleFavorite(e,t,s,a,i,r){try{let{data:n}=await c.N.from("favorites").select("id").eq("item_type",e).eq("item_id",t).eq("organization_id",a).single();if(n){let{error:e}=await c.N.from("favorites").delete().eq("id",n.id);if(e)throw e;return!1}{let{error:n}=await c.N.from("favorites").insert([{item_type:e,item_id:t,item_name:s,item_description:i,organization_id:a,color:r||"bg-gray-500"}]);if(n)throw n;return!0}}catch(e){return!1}}}var l=s(94615),o=s(53904),d=s(40646),m=s(85339),x=s(54213),u=s(71539),h=s(14186);class g{static async syncAll(e){let t=Date.now(),s={success:!1,totalSynced:0,errors:[],duration:0,timestamp:new Date().toISOString(),details:{organizations:0,configurations:0,documents:0,passwords:0,domains:0,sslCertificates:0,networks:0,knownIssues:0,rfcs:0,warranties:0,contacts:0,assets:0,alerts:0,activities:0,favorites:0}};try{for(let t=0;t<this.SYNC_STEPS.length;t++){let a=this.SYNC_STEPS[t],i=Math.round((t+1)/this.SYNC_STEPS.length*100);e&&e({step:a,progress:i,total:this.SYNC_STEPS.length,message:"Syncing ".concat(a,"..."),completed:!1});try{let e=await this.syncDataType(a);s.details[a]=e,s.totalSynced+=e}catch(e){s.errors.push("".concat(a,": ").concat(e.message))}await new Promise(e=>setTimeout(e,200))}return s.success=0===s.errors.length,s.duration=Date.now()-t,e&&e({step:"complete",progress:100,total:this.SYNC_STEPS.length,message:s.success?"Sync completed successfully!":"Sync completed with errors",completed:!0,error:s.errors.length>0?s.errors.join(", "):void 0}),s}catch(a){return s.errors.push("System error: ".concat(a.message)),s.duration=Date.now()-t,e&&e({step:"error",progress:0,total:this.SYNC_STEPS.length,message:"Sync failed",completed:!0,error:a.message}),s}}static async syncDataType(e){try{let t=await fetch("/api/sync/".concat(e),{method:"POST",headers:{"Content-Type":"application/json"}});if(!t.ok)throw Error("HTTP ".concat(t.status,": ").concat(t.statusText));return(await t.json()).count||0}catch(t){throw Error("Failed to sync ".concat(e,": ").concat(t.message))}}static async getLastSyncStatus(){try{let e=await fetch("/api/sync/status");if(e.ok)return await e.json()}catch(e){}return null}static async clearCache(){try{await fetch("/api/sync/clear-cache",{method:"POST"})}catch(e){}}}function p(e){var t;let{onSyncComplete:s,className:r=""}=e,[c,n]=(0,i.useState)(!1),[l,p]=(0,i.useState)(null),[f,y]=(0,i.useState)(null),[N,w]=(0,i.useState)(!1),v=(0,i.useCallback)(async()=>{n(!0),p(null),y(null);try{let e=await g.syncAll(e=>{p(e)});y(e),s&&s(e)}catch(e){y({success:!1,totalSynced:0,errors:[e.message],duration:0,timestamp:new Date().toISOString(),details:{organizations:0,configurations:0,documents:0,passwords:0,domains:0,sslCertificates:0,networks:0,knownIssues:0,rfcs:0,warranties:0,contacts:0,assets:0,alerts:0,activities:0,favorites:0}})}finally{n(!1),p(null)}},[s]);return(0,a.jsxs)("div",{className:"bg-gray-800 rounded-lg border border-gray-700 ".concat(r),children:[(0,a.jsx)("div",{className:"p-4 border-b border-gray-700",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"p-2 rounded-lg border ".concat(c?"border-blue-500 bg-blue-500/10":(null==f?void 0:f.success)?"border-green-500 bg-green-500/10":f&&!f.success?"border-red-500 bg-red-500/10":"border-gray-600 bg-gray-700/50"),children:c?(0,a.jsx)(o.A,{className:"w-4 h-4 animate-spin"}):(null==f?void 0:f.success)?(0,a.jsx)(d.A,{className:"w-4 h-4 text-green-400"}):f&&!f.success?(0,a.jsx)(m.A,{className:"w-4 h-4 text-red-400"}):(0,a.jsx)(x.A,{className:"w-4 h-4"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-white font-medium",children:"System Synchronization"}),(0,a.jsx)("p",{className:"text-gray-400 text-sm",children:c?"Syncing all system data...":f?"Last sync: ".concat(new Date(f.timestamp).toLocaleTimeString()):"Keep all data up to date"})]})]}),(0,a.jsxs)("button",{onClick:v,disabled:c,className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-600 disabled:cursor-not-allowed text-white rounded-lg transition-colors",children:[(0,a.jsx)(u.A,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:c?"Syncing...":"Sync All"})]})]})}),l&&(0,a.jsxs)("div",{className:"p-4 border-b border-gray-700",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("span",{className:"text-sm text-gray-300",children:l.message}),(0,a.jsxs)("span",{className:"text-sm text-gray-400",children:[l.progress,"%"]})]}),(0,a.jsx)("div",{className:"w-full bg-gray-700 rounded-full h-2",children:(0,a.jsx)("div",{className:"bg-blue-500 h-2 rounded-full transition-all duration-300",style:{width:"".concat(l.progress,"%")}})})]}),f&&(0,a.jsxs)("div",{className:"p-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[f.success?(0,a.jsx)(d.A,{className:"w-5 h-5 text-green-400"}):(0,a.jsx)(m.A,{className:"w-5 h-5 text-red-400"}),(0,a.jsx)("span",{className:"font-medium ".concat(f.success?"text-green-400":"text-red-400"),children:f.success?"Sync Completed":"Sync Failed"})]}),(0,a.jsx)("button",{onClick:()=>w(!N),className:"text-gray-400 hover:text-white text-sm",children:N?"Hide Details":"Show Details"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-4 mb-3",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-white",children:f.totalSynced}),(0,a.jsx)("div",{className:"text-xs text-gray-400",children:"Items Synced"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-white",children:(t=f.duration)<1e3?"".concat(t,"ms"):"".concat((t/1e3).toFixed(1),"s")}),(0,a.jsx)("div",{className:"text-xs text-gray-400",children:"Duration"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-white",children:f.errors.length}),(0,a.jsx)("div",{className:"text-xs text-gray-400",children:"Errors"})]})]}),N&&(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("div",{className:"grid grid-cols-2 gap-2 text-sm",children:Object.entries(f.details).map(e=>{let[t,s]=e;return(0,a.jsxs)("div",{className:"flex justify-between py-1",children:[(0,a.jsx)("span",{className:"text-gray-400 capitalize",children:t.replace(/([A-Z])/g," $1")}),(0,a.jsx)("span",{className:"text-white",children:s})]},t)})}),f.errors.length>0&&(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsx)("h4",{className:"text-red-400 font-medium mb-2",children:"Errors:"}),(0,a.jsx)("div",{className:"space-y-1",children:f.errors.map((e,t)=>(0,a.jsx)("div",{className:"text-sm text-red-300 bg-red-900/20 p-2 rounded",children:e},t))})]})]})]}),(0,a.jsx)("div",{className:"p-4 border-t border-gray-700 bg-gray-800/50",children:(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)("button",{onClick:()=>g.clearCache(),className:"text-gray-400 hover:text-white",children:"Clear Cache"}),(0,a.jsx)("button",{onClick:()=>g.getLastSyncStatus(),className:"text-gray-400 hover:text-white",children:"Check Status"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-1 text-gray-500",children:[(0,a.jsx)(h.A,{className:"w-3 h-3"}),(0,a.jsx)("span",{children:"Auto-sync every 30 minutes"})]})]})})]})}g.SYNC_STEPS=["organizations","configurations","documents","passwords","domains","sslCertificates","networks","knownIssues","rfcs","warranties","contacts","assets","alerts","activities","favorites"];var f=s(23227),y=s(381),N=s(57434),w=s(69803),v=s(34869),j=s(32919),b=s(19302),_=s(30446),S=s(75525),A=s(17580),C=s(95880),k=s(1243),D=s(38564),I=s(8804),z=s(33109),P=s(79397),E=s(84616),T=s(23861);function O(){let e=(0,r.useRouter)(),[t,s]=(0,i.useState)(null),[c,o]=(0,i.useState)(!0),[m,x]=(0,i.useState)(null),u=async e=>{if(e.success)try{let e=await n.getDashboardData();s(e)}catch(e){}},[g]=(0,i.useState)([{name:"Creative BC",description:"101 Assets updated",time:"6 Passwords updated",timeAgo:"In the last 7 days"},{name:"Roman Catholic Archdiocese of Vancouver",description:"102 Assets updated",time:"6 Passwords updated",timeAgo:"In the last 7 days"},{name:"Good Leaf Community Farms Ltd.",description:"202 Passwords updated",time:"40 Documents updated",timeAgo:"20 Folders created",additional:"27 Documents updated"}]);(0,i.useEffect)(()=>{O()},[]);let O=async()=>{try{o(!0),x(null);let e=await n.getDashboardData();s(e)}catch(e){x("Failed to load dashboard data")}finally{o(!1)}},F=async(e,t,s,a,i,r)=>{try{await n.toggleFavorite(e,t,s,a,i,r),await O()}catch(e){}};return c?(0,a.jsxs)("div",{className:"min-h-screen bg-gray-900 text-white",children:[(0,a.jsx)(l.default,{currentPage:"Dashboard"}),(0,a.jsx)("div",{className:"p-6",children:(0,a.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,a.jsx)("div",{className:"text-gray-400",children:"Loading dashboard..."})})})]}):m?(0,a.jsxs)("div",{className:"min-h-screen bg-gray-900 text-white",children:[(0,a.jsx)(l.default,{currentPage:"Dashboard"}),(0,a.jsx)("div",{className:"p-6",children:(0,a.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,a.jsx)("div",{className:"text-red-400",children:m})})})]}):(0,a.jsxs)("div",{className:"min-h-screen bg-gray-900 text-white",children:[(0,a.jsx)(l.default,{currentPage:"Dashboard"}),(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsx)("h1",{className:"text-2xl font-semibold mb-6",children:"Dashboard"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,a.jsxs)("div",{className:"lg:col-span-2",children:[(0,a.jsxs)("div",{className:"bg-gray-800 rounded-lg p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(D.A,{className:"w-5 h-5 text-yellow-500 mr-2"}),(0,a.jsx)("h2",{className:"text-lg font-medium",children:"Favorites"})]}),(0,a.jsxs)("span",{className:"text-sm text-gray-400",children:[(null==t?void 0:t.favorites.length)||0," items"]})]}),(0,a.jsx)("div",{className:"grid grid-cols-5 gap-4",children:(null==t?void 0:t.favorites.length)===0?(0,a.jsxs)("div",{className:"col-span-5 text-center py-8 text-gray-400",children:[(0,a.jsx)(D.A,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),(0,a.jsx)("p",{children:"No favorites yet"}),(0,a.jsx)("p",{className:"text-sm",children:"Click the star icon on any item to add it to favorites"})]}):null==t?void 0:t.favorites.map(t=>(0,a.jsxs)("div",{className:"text-center cursor-pointer hover:opacity-80 transition-opacity",onClick:()=>{let s="/organizations/".concat(t.organization_id),a=s;switch(t.item_type){case"configuration":a="".concat(s,"/configurations");break;case"document":a="".concat(s,"/documents");break;case"password":a="".concat(s,"/passwords");break;case"domain":a="".concat(s,"/domain-tracker");break;case"ssl_certificate":a="".concat(s,"/ssl-tracker");break;case"network":a="".concat(s,"/networks");break;case"known_issue":a="".concat(s,"/known-issues");break;default:a=s}e.push(a)},children:[(0,a.jsxs)("div",{className:"w-16 h-16 ".concat(t.color," rounded-full flex items-center justify-center mx-auto mb-2 relative group"),children:[(0,a.jsx)("span",{className:"text-white font-semibold text-sm",children:t.item_name.substring(0,3).toUpperCase()}),(0,a.jsx)("button",{onClick:e=>{e.stopPropagation(),F(t.item_type,t.item_id,t.item_name,t.organization_id)},className:"absolute -top-1 -right-1 w-5 h-5 bg-yellow-500 rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:(0,a.jsx)(I.A,{className:"w-3 h-3 text-white"})})]}),(0,a.jsx)("p",{className:"text-xs text-gray-300 truncate",children:t.item_name}),(0,a.jsx)("p",{className:"text-xs text-gray-500 truncate",children:t.item_type})]},t.id))})]}),(0,a.jsxs)("div",{className:"bg-gray-800 rounded-lg p-6 mt-6",children:[(0,a.jsxs)("div",{className:"flex items-center mb-4",children:[(0,a.jsx)(z.A,{className:"w-5 h-5 text-blue-500 mr-2"}),(0,a.jsx)("h2",{className:"text-lg font-medium",children:"System Overview"})]}),(0,a.jsx)("div",{className:"grid grid-cols-4 gap-4 mb-6",children:(!t?[]:[{label:"Organizations",value:t.stats.organizations,icon:f.A,color:"text-blue-500"},{label:"Configurations",value:t.stats.configurations,icon:y.A,color:"text-green-500"},{label:"Documents",value:t.stats.documents,icon:N.A,color:"text-purple-500"},{label:"Passwords",value:t.stats.passwords,icon:w.A,color:"text-yellow-500"},{label:"Domains",value:t.stats.domains,icon:v.A,color:"text-indigo-500"},{label:"SSL Certificates",value:t.stats.ssl_certificates,icon:j.A,color:"text-green-500"},{label:"Networks",value:t.stats.networks,icon:b.A,color:"text-blue-500"},{label:"Known Issues",value:t.stats.known_issues,icon:_.A,color:"text-red-500"},{label:"RFCs",value:t.stats.rfcs,icon:N.A,color:"text-orange-500"},{label:"Warranties",value:t.stats.warranties,icon:S.A,color:"text-purple-500"},{label:"Contacts",value:t.stats.contacts,icon:A.A,color:"text-cyan-500"},{label:"Assets",value:t.stats.assets,icon:C.A,color:"text-gray-500"}]).map((e,t)=>(0,a.jsxs)("div",{className:"text-center p-3 bg-gray-700 rounded-lg",children:[(0,a.jsx)("div",{className:"flex items-center justify-center mb-2",children:(0,a.jsx)(e.icon,{className:"w-5 h-5 ".concat(e.color)})}),(0,a.jsx)("div",{className:"text-xl font-bold text-white mb-1",children:e.value.toLocaleString()}),(0,a.jsx)("div",{className:"text-xs text-gray-400",children:e.label})]},t))}),(0,a.jsxs)("div",{className:"border-t border-gray-700 pt-4",children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-gray-300 mb-3",children:"System Alerts"}),(0,a.jsx)("div",{className:"grid grid-cols-2 gap-4",children:(!t?[]:[{label:"Expiring Certificates",value:t.stats.expiring_certificates,icon:k.A,color:"text-yellow-500"},{label:"Expired Warranties",value:t.stats.expired_warranties,icon:k.A,color:"text-red-500"},{label:"Open Issues",value:t.stats.open_issues,icon:_.A,color:"text-red-500"},{label:"Pending RFCs",value:t.stats.pending_rfcs,icon:h.A,color:"text-orange-500"}]).map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center space-x-3 p-2 bg-gray-700 rounded",children:[(0,a.jsx)(e.icon,{className:"w-4 h-4 ".concat(e.color)}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm font-medium text-white",children:e.value}),(0,a.jsx)("div",{className:"text-xs text-gray-400",children:e.label})]})]},t))})]})]})]}),(0,a.jsx)(p,{onSyncComplete:u,className:"mb-6"}),(0,a.jsxs)("div",{className:"bg-gray-800 rounded-lg p-6 mb-6",children:[(0,a.jsxs)("div",{className:"flex items-center mb-4",children:[(0,a.jsx)(P.A,{className:"w-5 h-5 text-green-500 mr-2"}),(0,a.jsx)("h2",{className:"text-lg font-medium",children:"Recent Activity"})]}),(0,a.jsx)("div",{className:"space-y-4",children:(null==t?void 0:t.recentActivity.length)===0?(0,a.jsxs)("div",{className:"text-center py-4 text-gray-400",children:[(0,a.jsx)(P.A,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),(0,a.jsx)("p",{children:"No recent activity"})]}):null==t?void 0:t.recentActivity.map(e=>(0,a.jsx)("div",{className:"border-b border-gray-700 pb-4 last:border-b-0",children:(0,a.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,a.jsxs)("div",{className:"w-10 h-10 bg-gray-600 rounded-full flex items-center justify-center flex-shrink-0",children:["created"===e.type&&(0,a.jsx)(E.A,{className:"w-4 h-4 text-green-400"}),"updated"===e.type&&(0,a.jsx)(y.A,{className:"w-4 h-4 text-blue-400"}),"deleted"===e.type&&(0,a.jsx)(k.A,{className:"w-4 h-4 text-red-400"})]}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-white truncate",children:e.item_name}),(0,a.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:e.description}),(0,a.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:[new Date(e.timestamp).toLocaleDateString()," • ",e.user_name]})]})]})},e.id))})]}),(0,a.jsxs)("div",{className:"bg-gray-800 rounded-lg p-6",children:[(0,a.jsxs)("div",{className:"flex items-center mb-4",children:[(0,a.jsx)(T.A,{className:"w-5 h-5 text-red-500 mr-2"}),(0,a.jsx)("h2",{className:"text-lg font-medium",children:"System Alerts"})]}),(0,a.jsx)("div",{className:"space-y-4",children:(null==t?void 0:t.alerts.length)===0?(0,a.jsxs)("div",{className:"text-center py-4 text-gray-400",children:[(0,a.jsx)(d.A,{className:"w-8 h-8 mx-auto mb-2 text-green-500"}),(0,a.jsx)("p",{children:"All systems operational"})]}):null==t?void 0:t.alerts.map(e=>(0,a.jsx)("div",{className:"border-b border-gray-700 pb-4 last:border-b-0",children:(0,a.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,a.jsxs)("div",{className:"w-10 h-10 rounded-full flex items-center justify-center flex-shrink-0",children:["error"===e.type&&(0,a.jsx)(k.A,{className:"w-5 h-5 text-red-500"}),"warning"===e.type&&(0,a.jsx)(k.A,{className:"w-5 h-5 text-yellow-500"}),"info"===e.type&&(0,a.jsx)(T.A,{className:"w-5 h-5 text-blue-500"})]}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-white truncate",children:e.title}),(0,a.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:e.message}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:new Date(e.created_at).toLocaleDateString()})]})]})},e.id))})]})]})]})]})}}},e=>{e.O(0,[5647,6441,4137,8441,5964,7358],()=>e(e.s=36657)),_N_E=e.O()}]);