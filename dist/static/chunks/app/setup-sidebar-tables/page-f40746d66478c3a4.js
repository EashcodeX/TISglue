(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8813],{16802:(e,n,a)=>{Promise.resolve().then(a.bind(a,59787))},42099:(e,n,a)=>{"use strict";a.d(n,{N:()=>s});let s=(0,a(55647).UU)("https://yhznjxfzpthmyyhbhihp.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inloem5qeGZ6cHRobXl5aGJoaWhwIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQyNDE0MzcsImV4cCI6MjA2OTgxNzQzN30.BlP9YoilaPopQgkZXZa-_WJPUIjnX9nTyYspaBV0Cqc")},59787:(e,n,a)=>{"use strict";a.r(n),a.d(n,{default:()=>r});var s=a(95155),t=a(12115),i=a(42099);function r(){let[e,n]=(0,t.useState)(!1),[a,r]=(0,t.useState)([]),o=e=>{r(n=>[...n,e])},d=async()=>{n(!0),r([]);try{o("\uD83D\uDD27 Creating sidebar count tables...");let{error:e}=await i.N.rpc("exec_sql",{sql:"\n        CREATE TABLE IF NOT EXISTS documents (\n          id UUID DEFAULT gen_random_uuid() PRIMARY KEY,\n          organization_id UUID REFERENCES organizations(id) ON DELETE CASCADE,\n          name VARCHAR(255) NOT NULL,\n          description TEXT,\n          file_url TEXT,\n          file_type VARCHAR(50),\n          file_size INTEGER,\n          created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n          updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n        );\n        \n        CREATE INDEX IF NOT EXISTS idx_documents_organization_id ON documents(organization_id);\n      "});e?o("⚠️ Documents table: ".concat(e.message)):o("✅ Documents table created");let{error:n}=await i.N.rpc("exec_sql",{sql:"\n        CREATE TABLE IF NOT EXISTS passwords (\n          id UUID DEFAULT gen_random_uuid() PRIMARY KEY,\n          organization_id UUID REFERENCES organizations(id) ON DELETE CASCADE,\n          name VARCHAR(255) NOT NULL,\n          username VARCHAR(255),\n          password_encrypted TEXT,\n          url TEXT,\n          notes TEXT,\n          created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n          updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n        );\n        \n        CREATE INDEX IF NOT EXISTS idx_passwords_organization_id ON passwords(organization_id);\n      "});n?o("⚠️ Passwords table: ".concat(n.message)):o("✅ Passwords table created");let{error:a}=await i.N.rpc("exec_sql",{sql:"\n        CREATE TABLE IF NOT EXISTS configurations (\n          id UUID DEFAULT gen_random_uuid() PRIMARY KEY,\n          organization_id UUID REFERENCES organizations(id) ON DELETE CASCADE,\n          name VARCHAR(255) NOT NULL,\n          description TEXT,\n          config_type VARCHAR(100),\n          config_data JSONB,\n          created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n          updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n        );\n        \n        CREATE INDEX IF NOT EXISTS idx_configurations_organization_id ON configurations(organization_id);\n      "});a?o("⚠️ Configurations table: ".concat(a.message)):o("✅ Configurations table created");let{error:s}=await i.N.rpc("exec_sql",{sql:"\n        CREATE TABLE IF NOT EXISTS networks (\n          id UUID DEFAULT gen_random_uuid() PRIMARY KEY,\n          organization_id UUID REFERENCES organizations(id) ON DELETE CASCADE,\n          name VARCHAR(255) NOT NULL,\n          network_address VARCHAR(50),\n          subnet_mask VARCHAR(50),\n          gateway VARCHAR(50),\n          dns_servers TEXT[],\n          description TEXT,\n          created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n          updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n        );\n        \n        CREATE INDEX IF NOT EXISTS idx_networks_organization_id ON networks(organization_id);\n      "});s?o("⚠️ Networks table: ".concat(s.message)):o("✅ Networks table created");let{error:t}=await i.N.rpc("exec_sql",{sql:"\n        CREATE TABLE IF NOT EXISTS ssl_certificates (\n          id UUID DEFAULT gen_random_uuid() PRIMARY KEY,\n          organization_id UUID REFERENCES organizations(id) ON DELETE CASCADE,\n          domain VARCHAR(255) NOT NULL,\n          issuer VARCHAR(255),\n          expiry_date DATE,\n          certificate_type VARCHAR(100),\n          status VARCHAR(50) DEFAULT 'active',\n          created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n          updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n        );\n        \n        CREATE INDEX IF NOT EXISTS idx_ssl_certificates_organization_id ON ssl_certificates(organization_id);\n      "});t?o("⚠️ SSL Certificates table: ".concat(t.message)):o("✅ SSL Certificates table created");let{error:r}=await i.N.rpc("exec_sql",{sql:"\n        CREATE TABLE IF NOT EXISTS domains (\n          id UUID DEFAULT gen_random_uuid() PRIMARY KEY,\n          organization_id UUID REFERENCES organizations(id) ON DELETE CASCADE,\n          domain_name VARCHAR(255) NOT NULL,\n          registrar VARCHAR(255),\n          expiry_date DATE,\n          auto_renew BOOLEAN DEFAULT false,\n          status VARCHAR(50) DEFAULT 'active',\n          created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n          updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n        );\n        \n        CREATE INDEX IF NOT EXISTS idx_domains_organization_id ON domains(organization_id);\n      "});r?o("⚠️ Domains table: ".concat(r.message)):o("✅ Domains table created"),o("\uD83C\uDF89 Table creation completed!"),o("\uD83D\uDD04 Sidebar counts will now show real data from these tables")}catch(e){o("❌ Setup failed: ".concat(e.message))}n(!1)};return(0,s.jsxs)("div",{className:"min-h-screen bg-gray-900 text-white p-8",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold mb-6",children:"\uD83D\uDD27 Setup Sidebar Count Tables"}),(0,s.jsxs)("div",{className:"bg-gray-800 p-6 rounded-lg mb-6",children:[(0,s.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"Create Database Tables"}),(0,s.jsx)("p",{className:"text-gray-300 mb-6",children:"This will create the necessary database tables for sidebar counts:"}),(0,s.jsxs)("ul",{className:"text-gray-300 text-sm space-y-2 mb-6",children:[(0,s.jsxs)("li",{children:["• ",(0,s.jsx)("strong",{children:"documents"})," - For document counts"]}),(0,s.jsxs)("li",{children:["• ",(0,s.jsx)("strong",{children:"passwords"})," - For password counts"]}),(0,s.jsxs)("li",{children:["• ",(0,s.jsx)("strong",{children:"configurations"})," - For configuration counts"]}),(0,s.jsxs)("li",{children:["• ",(0,s.jsx)("strong",{children:"networks"})," - For network counts"]}),(0,s.jsxs)("li",{children:["• ",(0,s.jsx)("strong",{children:"ssl_certificates"})," - For SSL certificate counts"]}),(0,s.jsxs)("li",{children:["• ",(0,s.jsx)("strong",{children:"domains"})," - For domain counts"]})]}),(0,s.jsx)("button",{onClick:d,disabled:e,className:"px-6 py-3 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-600 rounded text-white font-medium",children:e?"Creating Tables...":"\uD83D\uDD27 Create Tables"})]}),a.length>0&&(0,s.jsxs)("div",{className:"bg-gray-800 p-6 rounded-lg",children:[(0,s.jsx)("h3",{className:"font-medium mb-4",children:"Setup Results:"}),(0,s.jsx)("div",{className:"space-y-1 text-sm font-mono max-h-96 overflow-y-auto",children:a.map((e,n)=>(0,s.jsx)("div",{className:e.includes("✅")?"text-green-400":e.includes("❌")?"text-red-400":e.includes("⚠️")?"text-yellow-400":e.includes("\uD83C\uDF89")?"text-blue-400":"text-gray-300",children:e},n))})]}),(0,s.jsxs)("div",{className:"mt-6 bg-blue-900/20 border border-blue-600 rounded-lg p-4",children:[(0,s.jsx)("h3",{className:"text-blue-400 font-semibold mb-2",children:"\uD83D\uDCCA After Setup:"}),(0,s.jsxs)("ul",{className:"text-blue-200 text-sm space-y-1",children:[(0,s.jsx)("li",{children:"• Sidebar will show real counts (0 for new organizations)"}),(0,s.jsx)("li",{children:"• Counts update automatically when you add/remove items"}),(0,s.jsx)("li",{children:"• Each organization has separate counts"}),(0,s.jsx)("li",{children:"• Counts are cached for 30 seconds for performance"}),(0,s.jsx)("li",{children:"• Tables are properly indexed for fast queries"})]})]})]})}}},e=>{e.O(0,[5647,8441,5964,7358],()=>e(e.s=16802)),_N_E=e.O()}]);