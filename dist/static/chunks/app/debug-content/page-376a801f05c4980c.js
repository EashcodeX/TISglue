(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5934],{4096:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>c});var s=a(95155),i=a(12115),n=a(42099),o=a(45745),r=a(73860);function c(){let[e,t]=(0,i.useState)([]),[a,c]=(0,i.useState)(""),[l,d]=(0,i.useState)([]),[m,u]=(0,i.useState)([]),[h,g]=(0,i.useState)(!1);(0,i.useEffect)(()=>{f()},[]);let f=async()=>{try{let{data:e,error:a}=await n.N.from("organizations").select("id, name").limit(10);if(a)throw a;t(e||[])}catch(e){}},x=async e=>{g(!0),c(e);try{let t=await o.o.getOrganizationSidebarItems(e);d(t);let a=[];for(let e of t)try{let t=await r.A.getPageContent(e.id);a.push({sidebarItem:e,content:t})}catch(t){a.push({sidebarItem:e,content:null,error:t.message})}u(a)}catch(e){}g(!1)},p=async(e,t)=>{try{try{await n.N.from("page_content").delete().eq("sidebar_item_id",e)}catch(e){}await r.A.createDefaultPageContent(e,t),await x(a)}catch(e){}};return(0,s.jsxs)("div",{className:"min-h-screen bg-gray-900 text-white p-8",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold mb-6",children:"Content Debug Tool"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,s.jsxs)("div",{className:"bg-gray-800 p-4 rounded",children:[(0,s.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"Organizations"}),(0,s.jsx)("div",{className:"space-y-2",children:e.map(e=>(0,s.jsxs)("button",{onClick:()=>x(e.id),className:"w-full text-left p-2 rounded ".concat(a===e.id?"bg-blue-600":"bg-gray-700 hover:bg-gray-600"),children:[(0,s.jsx)("div",{className:"font-medium",children:e.name}),(0,s.jsx)("div",{className:"text-xs text-gray-400",children:e.id})]},e.id))})]}),(0,s.jsxs)("div",{className:"bg-gray-800 p-4 rounded",children:[(0,s.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"Sidebar Items"}),h?(0,s.jsx)("div",{className:"text-yellow-400",children:"Loading..."}):(0,s.jsx)("div",{className:"space-y-2",children:l.map(e=>(0,s.jsxs)("div",{className:"p-2 bg-gray-700 rounded",children:[(0,s.jsx)("div",{className:"font-medium",children:e.item_name}),(0,s.jsxs)("div",{className:"text-xs text-gray-400",children:["Slug: ",e.item_slug]}),(0,s.jsxs)("div",{className:"text-xs text-gray-400",children:["ID: ",e.id]}),(0,s.jsxs)("div",{className:"text-xs text-gray-400",children:["System: ",e.is_system?"Yes":"No"]})]},e.id))})]}),(0,s.jsxs)("div",{className:"bg-gray-800 p-4 rounded",children:[(0,s.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"Page Contents"}),(0,s.jsx)("div",{className:"space-y-4",children:m.map((e,t)=>(0,s.jsxs)("div",{className:"p-3 bg-gray-700 rounded",children:[(0,s.jsx)("div",{className:"font-medium text-blue-400",children:e.sidebarItem.item_name}),e.content?(0,s.jsxs)("div",{className:"mt-2 space-y-1",children:[(0,s.jsxs)("div",{className:"text-sm",children:[(0,s.jsx)("span",{className:"text-green-400",children:"✅ Content Type:"})," ",e.content.content_type]}),(0,s.jsxs)("div",{className:"text-xs text-gray-400",children:["Content ID: ",e.content.id]}),(0,s.jsxs)("div",{className:"text-xs text-gray-400",children:["Updated: ",new Date(e.content.updated_at).toLocaleString()]}),(0,s.jsxs)("div",{className:"text-xs bg-gray-800 p-2 rounded mt-2",children:[(0,s.jsx)("div",{className:"text-gray-300",children:"Content Data:"}),(0,s.jsx)("pre",{className:"text-gray-400 text-xs overflow-auto max-h-20",children:JSON.stringify(e.content.content_data,null,2)})]})]}):(0,s.jsxs)("div",{className:"mt-2",children:[(0,s.jsx)("div",{className:"text-red-400",children:"❌ No Content"}),e.error&&(0,s.jsx)("div",{className:"text-xs text-red-300 mt-1",children:e.error}),(0,s.jsxs)("div",{className:"mt-2 space-y-1",children:[(0,s.jsx)("div",{className:"text-xs text-gray-400",children:"Recreate as:"}),(0,s.jsx)("div",{className:"flex flex-wrap gap-1",children:r.A.getContentTypes().map(t=>(0,s.jsx)("button",{onClick:()=>p(e.sidebarItem.id,t.id),className:"px-2 py-1 bg-blue-600 hover:bg-blue-700 rounded text-xs",children:t.name},t.id))})]})]})]},t))})]})]}),(0,s.jsxs)("div",{className:"mt-8 bg-blue-900/20 border border-blue-600 rounded-lg p-4",children:[(0,s.jsx)("h3",{className:"text-blue-400 font-semibold mb-2",children:"Debug Instructions:"}),(0,s.jsxs)("ol",{className:"text-blue-200 text-sm space-y-1",children:[(0,s.jsx)("li",{children:"1. Select an organization to load its sidebar items and content"}),(0,s.jsx)("li",{children:'2. Check if your "hiii" item has content and what type it is'}),(0,s.jsx)("li",{children:'3. If it shows "No Content" or wrong type, use the "Recreate as" buttons'}),(0,s.jsx)("li",{children:'4. Click "Custom Form" to recreate it with the correct form-data content type'}),(0,s.jsx)("li",{children:"5. Then navigate to the item to see if the FormBuilder appears"})]})]})]})}},42099:(e,t,a)=>{"use strict";a.d(t,{N:()=>s});let s=(0,a(55647).UU)("https://yhznjxfzpthmyyhbhihp.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inloem5qeGZ6cHRobXl5aGJoaWhwIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQyNDE0MzcsImV4cCI6MjA2OTgxNzQzN30.BlP9YoilaPopQgkZXZa-_WJPUIjnX9nTyYspaBV0Cqc")},45745:(e,t,a)=>{"use strict";a.d(t,{o:()=>i});var s=a(42099);class i{static async getOrganizationCounts(e){let t="counts_".concat(e),a=this.cache.get(t);if(a&&Date.now()-a.timestamp<this.CACHE_DURATION)return a.data;try{let a={},{count:i,error:n}=await s.N.from("contacts").select("*",{count:"exact",head:!0}).eq("organization_id",e);n||(a.contacts=i||0);let{count:o,error:r}=await s.N.from("locations").select("*",{count:"exact",head:!0}).eq("organization_id",e);r||(a.locations=o||0);let{count:c,error:l}=await s.N.from("documents").select("*",{count:"exact",head:!0}).eq("organization_id",e);l?a.documents=0:a.documents=c||0;let{count:d,error:m}=await s.N.from("passwords").select("*",{count:"exact",head:!0}).eq("organization_id",e);m?a.passwords=0:a.passwords=d||0;let{count:u,error:h}=await s.N.from("configurations").select("*",{count:"exact",head:!0}).eq("organization_id",e);h?a.configurations=0:a.configurations=u||0;let{count:g,error:f}=await s.N.from("networks").select("*",{count:"exact",head:!0}).eq("organization_id",e);f?a.networks=0:a.networks=g||0;let{count:x,error:p}=await s.N.from("ssl_certificates").select("*",{count:"exact",head:!0}).eq("organization_id",e);p?a.ssl_certificates=0:a.ssl_certificates=x||0;let{count:b,error:y}=await s.N.from("domains").select("*",{count:"exact",head:!0}).eq("organization_id",e);return y?a.domains=0:a.domains=b||0,this.cache.set(t,{data:a,timestamp:Date.now()}),a}catch(e){return{}}}static clearCache(e){e?(this.cache.delete("sidebar_".concat(e)),this.cache.delete("items_".concat(e)),this.cache.delete("counts_".concat(e))):this.cache.clear()}static clearCacheIfDifferentOrg(e){Array.from(this.cache.keys()).some(t=>t.includes("sidebar_")&&!t.includes(e))&&this.cache.clear()}static async getOrganizationSidebarItems(e){let t="items_".concat(e),a=this.cache.get(t);if(a&&Date.now()-a.timestamp<this.CACHE_DURATION)return a.data;let{data:i,error:n}=await s.N.from("organization_sidebar_items").select("*").eq("organization_id",e).eq("is_active",!0).order("sort_order",{ascending:!0});if(n)throw n;let o=i||[];return this.cache.set(t,{data:o,timestamp:Date.now()}),o}static async getOrganizationSidebarByCategory(e){let t="sidebar_".concat(e),a=this.cache.get(t);if(a&&Date.now()-a.timestamp<this.CACHE_DURATION)return a.data;let s=await this.getOrganizationSidebarItems(e),i=await this.getOrganizationCounts(e),n={"CLIENT CONTACT":{name:"CLIENT CONTACT",items:[],systemItems:[{name:"Site Summary",href:"/site-summary",icon:"FileText",count:1},{name:"Site Summary (Legacy)",href:"/site-summary-legacy",icon:"Archive",count:1},{name:"After Hour and Building/Site...",href:"/after-hour-access",icon:"Clock",count:1},{name:"Onsite Information",href:"/onsite-information",icon:"AlertTriangle"},{name:"Locations",href:"/locations",icon:"MapPin",count:i.locations||0},{name:"Contacts",href:"/contacts",icon:"Users",count:i.contacts||0}]},"CORE DOCUMENTATION":{name:"CORE DOCUMENTATION",items:[],systemItems:[{name:"TIS Standards Exception",href:"/tis-standards-exception",icon:"AlertTriangle"},{name:"TIS Contract Exceptions",href:"/tis-contract-exceptions",icon:"FileX"},{name:"Request for Change Form (RFC)",href:"/rfc",icon:"Clock"},{name:"Change Log",href:"/change-log",icon:"FileText"},{name:"Configurations",href:"/configurations",icon:"Settings",count:i.configurations||0},{name:"Documents",href:"/documents",icon:"FileText",count:i.documents||0},{name:"Domains - Liongard",href:"/domains-liongard",icon:"FileText",count:i.domains||0},{name:"Domain Tracker",href:"/domain-tracker",icon:"Globe",count:i.domains||0},{name:"Known Issues",href:"/known-issues",icon:"AlertTriangle",count:0},{name:"Maintenance Windows",href:"/maintenance-windows",icon:"Zap"},{name:"Multi-Factor Authentication",href:"/mfa",icon:"Shield",count:0},{name:"Networks",href:"/networks",icon:"Network",count:i.networks||0},{name:"Passwords",href:"/passwords",icon:"Key",count:i.passwords||0},{name:"SSL Tracker",href:"/ssl-tracker",icon:"Lock",count:i.ssl_certificates||0},{name:"TLS/SSL Certificate",href:"/tls-ssl-certificate",icon:"Shield",count:i.ssl_certificates||0}]}};return s.forEach(e=>{let t=e.parent_category||"CLIENT CONTACT";n[t]||(n[t]={name:t,items:[],systemItems:[]}),n[t].items.push(e)}),this.cache.set(t,{data:n,timestamp:Date.now()}),n}static async createSidebarItem(e){try{let{data:a,error:i}=await s.N.from("organization_sidebar_items").insert([e]).select().single();if(i){var t;if("42P01"===i.code)throw Error('Database table "organization_sidebar_items" does not exist. Please run the database setup SQL first.');if("23505"===i.code)throw Error("A sidebar item with this slug already exists for this organization.");if(null==(t=i.message)?void 0:t.includes("timeout"))throw Error("Database connection timeout. Please try again.");else throw Error("Database error: ".concat(i.message||"Unknown error"))}return this.clearCache(e.organization_id),a}catch(e){throw e}}static async updateSidebarItem(e,t){let{data:a,error:i}=await s.N.from("organization_sidebar_items").update({...t,updated_at:new Date().toISOString()}).eq("id",e).select().single();if(i)throw i;return a}static async deleteSidebarItem(e){let{error:t}=await s.N.from("organization_sidebar_items").delete().eq("id",e);if(t)throw t}static getAvailableIcons(){return[{value:"FileText",label:"Document"},{value:"Folder",label:"Folder"},{value:"Users",label:"Users"},{value:"Phone",label:"Phone"},{value:"Mail",label:"Email"},{value:"Settings",label:"Settings"},{value:"Code",label:"Code"},{value:"Database",label:"Database"},{value:"Server",label:"Server"},{value:"Network",label:"Network"},{value:"Shield",label:"Security"},{value:"Key",label:"Key"},{value:"Lock",label:"Lock"},{value:"Globe",label:"Globe"},{value:"Calendar",label:"Calendar"},{value:"Clock",label:"Clock"},{value:"Bug",label:"Bug"},{value:"AlertTriangle",label:"Alert"},{value:"CheckCircle",label:"Check"},{value:"Info",label:"Info"},{value:"Star",label:"Star"},{value:"Heart",label:"Heart"},{value:"Bookmark",label:"Bookmark"},{value:"Tag",label:"Tag"}]}static getAvailableCategories(){return[{value:"CLIENT CONTACT",label:"Client Contact"},{value:"CORE DOCUMENTATION",label:"Core Documentation"}]}}i.cache=new Map,i.CACHE_DURATION=3e4},73860:(e,t,a)=>{"use strict";a.d(t,{A:()=>i});var s=a(42099);class i{static getContentTypes(){return[{id:"rich-text",name:"Rich Text Document",description:"Create documents with formatted text, headings, lists, and basic styling",icon:"FileText",defaultData:{title:"New Document",content:"<h1>Welcome</h1><p>Start writing your content here...</p>"}},{id:"contact-form",name:"Contact Information",description:"Store contact details, phone numbers, emails, and addresses",icon:"Users",defaultData:{contacts:[{name:"",title:"",email:"",phone:"",mobile:"",notes:""}]}},{id:"location-info",name:"Location Information",description:"Track physical locations, addresses, and site details",icon:"MapPin",defaultData:{locations:[{name:"",address:"",city:"",state:"",zipCode:"",country:"",notes:"",coordinates:{lat:null,lng:null}}]}},{id:"form-data",name:"Custom Form",description:"Create custom forms with various input fields",icon:"FileInput",defaultData:{formTitle:"Custom Form",elements:[],submissions:[]}},{id:"document-library",name:"Document Library",description:"Upload and organize files and documents",icon:"FolderOpen",defaultData:{documents:[],allowedTypes:["pdf","doc","docx","txt","jpg","png"],maxFileSize:0xa00000}},{id:"notes-comments",name:"Notes & Comments",description:"Collaborative notes and comment system",icon:"MessageSquare",defaultData:{notes:[],allowComments:!0,categories:["General","Important","Follow-up"]}},{id:"checklist",name:"Checklist",description:"Create task lists and checklists",icon:"CheckSquare",defaultData:{title:"New Checklist",items:[{id:"item1",text:"Sample task",completed:!1,priority:"medium"}]}},{id:"key-value",name:"Key-Value Pairs",description:"Store configuration data, settings, or specifications",icon:"Settings",defaultData:{title:"Configuration",pairs:[{key:"Example Key",value:"Example Value",description:""}]}}]}static async getPageContent(e){let{data:t,error:a}=await s.N.from("page_contents").select("*").eq("sidebar_item_id",e).single();if(a){if(a.code,"42P01"===a.code)throw Error('Database table "page_contents" does not exist. Please run the database setup SQL first.');if("PGRST116"===a.code)throw Error("No page content found for this sidebar item. Please create content first.");throw Error("Database error: ".concat(a.message||"Unknown error"))}return t}static async createDefaultPageContent(e,t){let a=this.getContentTypes().find(e=>e.id===t);if(!a)throw Error("Unknown content type: ".concat(t));let i={sidebar_item_id:e,content_type:t,content_data:a.defaultData},{data:n,error:o}=await s.N.from("page_contents").insert([i]).select().single();if(o)if("42P01"===o.code)throw Error('Database table "page_contents" does not exist. Please run the database setup SQL first.');else throw Error("Database error: ".concat(o.message||"Unknown error"));return n}static async updatePageContent(e,t){let{data:a,error:i}=await s.N.from("page_contents").update({...t,updated_at:new Date().toISOString()}).eq("id",e).select().single();if(i)throw i;return a}static async deletePageContent(e){let{error:t}=await s.N.from("page_contents").delete().eq("id",e);if(t)throw t}static getContentType(e){return this.getContentTypes().find(t=>t.id===e)}}},93609:(e,t,a)=>{Promise.resolve().then(a.bind(a,4096))}},e=>{e.O(0,[5647,8441,5964,7358],()=>e(e.s=93609)),_N_E=e.O()}]);