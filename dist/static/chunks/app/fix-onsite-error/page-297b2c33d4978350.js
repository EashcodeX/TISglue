(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7296],{15954:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var i=s(95155),a=s(12115),n=s(42099);function o(){let[e,t]=(0,a.useState)([]),[s,o]=(0,a.useState)(!1),[r,l]=(0,a.useState)([]);(0,a.useEffect)(()=>{d()},[]);let c=e=>{l(t=>[...t,e])},d=async()=>{try{let{data:e,error:s}=await n.N.from("organizations").select("id, name").limit(10);if(s)throw s;t(e||[])}catch(e){}},m=async()=>{o(!0),l([]);try{c("\uD83D\uDD0D Searching for problematic sidebar items...");let e=[];for(let t of["onsite-information","emergency-contacts"]){let{data:s,error:i}=await n.N.from("organization_sidebar_items").select("*").eq("item_slug",t);if(i){c("❌ Error searching for ".concat(t,": ").concat(i.message));continue}s&&s.length>0&&(e.push(...s),c("\uD83D\uDCCB Found ".concat(s.length,' items with slug "').concat(t,'"')))}if(c("\uD83D\uDCCB Total problematic items found: ".concat(e.length)),e.length>0)for(let t of e){c('\uD83D\uDDD1️ Deleting: "'.concat(t.item_name,'" from organization ').concat(t.organization_id));let{error:e}=await n.N.from("page_contents").delete().eq("sidebar_item_id",t.id);e&&c("⚠️ Warning deleting content for ".concat(t.item_name,": ").concat(e.message));let{error:s}=await n.N.from("organization_sidebar_items").delete().eq("id",t.id);s?c("❌ Error deleting ".concat(t.item_name,": ").concat(s.message)):c('✅ Successfully deleted "'.concat(t.item_name,'"'))}else c("✅ No problematic sidebar items found");for(let e of["onsite-information","after-hours-access","emergency-contacts","site-access"]){let{data:t}=await n.N.from("organization_sidebar_items").select("id, item_name, item_slug, organization_id").eq("item_slug",e);if(t&&t.length>0)for(let s of(c("⚠️ Found ".concat(t.length,' items with potentially problematic slug: "').concat(e,'"')),t))c('   - "'.concat(s.item_name,'" in org ').concat(s.organization_id))}c("\uD83C\uDF89 Fix completed! Refresh your browser and try navigating again.")}catch(e){c("❌ Fix failed: ".concat(e.message))}o(!1)},g=async()=>{if(confirm("⚠️ This will delete ALL custom sidebar items from ALL organizations. Are you sure?")){o(!0),l([]);try{c("\uD83E\uDDF9 Deleting all custom sidebar items...");let{data:e,error:t}=await n.N.from("organization_sidebar_items").select("*").eq("is_system",!1);if(t)return void c("❌ Error searching: ".concat(t.message));if(c("\uD83D\uDCCB Found ".concat((null==e?void 0:e.length)||0," custom sidebar items")),e&&e.length>0){for(let t of e){let{error:e}=await n.N.from("page_contents").delete().eq("sidebar_item_id",t.id);e&&c("⚠️ Warning deleting content for ".concat(t.item_name,": ").concat(e.message))}let{error:t}=await n.N.from("organization_sidebar_items").delete().eq("is_system",!1);t?c("❌ Error deleting custom items: ".concat(t.message)):c("✅ Successfully deleted ".concat(e.length," custom sidebar items"))}c("\uD83C\uDF89 All custom sidebar items removed! Organizations now have clean sidebars.")}catch(e){c("❌ Cleanup failed: ".concat(e.message))}o(!1)}};return(0,i.jsxs)("div",{className:"min-h-screen bg-gray-900 text-white p-8",children:[(0,i.jsx)("h1",{className:"text-2xl font-bold mb-6",children:'\uD83D\uDD27 Fix "Page not found: onsite-information" Error'}),(0,i.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,i.jsxs)("div",{className:"bg-gray-800 p-6 rounded-lg",children:[(0,i.jsx)("h2",{className:"text-lg font-semibold mb-4 text-red-400",children:"\uD83D\uDEA8 Quick Fix"}),(0,i.jsx)("p",{className:"text-gray-300 mb-4",children:'This will find and delete any sidebar items with the slug "onsite-information" that are causing the "Page not found" error.'}),(0,i.jsx)("button",{onClick:m,disabled:s,className:"w-full px-4 py-3 bg-red-600 hover:bg-red-700 disabled:bg-gray-600 rounded text-white font-medium",children:s?"Fixing...":'Fix "onsite-information" Error'})]}),(0,i.jsxs)("div",{className:"bg-gray-800 p-6 rounded-lg",children:[(0,i.jsx)("h2",{className:"text-lg font-semibold mb-4 text-yellow-400",children:"⚠️ Nuclear Option"}),(0,i.jsx)("p",{className:"text-gray-300 mb-4",children:"This will delete ALL custom sidebar items from ALL organizations, leaving only the default system items. Use this if you want a completely clean slate."}),(0,i.jsx)("button",{onClick:g,disabled:s,className:"w-full px-4 py-3 bg-yellow-600 hover:bg-yellow-700 disabled:bg-gray-600 rounded text-white font-medium",children:s?"Cleaning...":"Delete All Custom Sidebar Items"})]})]}),r.length>0&&(0,i.jsxs)("div",{className:"mt-8 bg-gray-800 p-6 rounded-lg",children:[(0,i.jsx)("h3",{className:"font-medium mb-4",children:"Results:"}),(0,i.jsx)("div",{className:"space-y-1 text-sm font-mono max-h-96 overflow-y-auto",children:r.map((e,t)=>(0,i.jsx)("div",{className:e.includes("✅")?"text-green-400":e.includes("❌")?"text-red-400":e.includes("⚠️")?"text-yellow-400":e.includes("\uD83C\uDF89")?"text-blue-400":"text-gray-300",children:e},t))})]}),(0,i.jsxs)("div",{className:"mt-8 bg-blue-900/20 border border-blue-600 rounded-lg p-6",children:[(0,i.jsx)("h3",{className:"text-blue-400 font-semibold mb-4",children:"\uD83D\uDCCB What This Does:"}),(0,i.jsxs)("ul",{className:"text-blue-200 text-sm space-y-2",children:[(0,i.jsxs)("li",{children:["• ",(0,i.jsx)("strong",{children:"Quick Fix:"}),' Finds and deletes only the problematic "onsite-information" sidebar items']}),(0,i.jsxs)("li",{children:["• ",(0,i.jsx)("strong",{children:"Nuclear Option:"})," Removes ALL custom sidebar items, leaving only system defaults"]}),(0,i.jsxs)("li",{children:["• ",(0,i.jsx)("strong",{children:"Safe:"})," Only deletes custom items, never touches system sidebar items"]}),(0,i.jsxs)("li",{children:["• ",(0,i.jsx)("strong",{children:"Clean:"})," Also removes associated page content to prevent orphaned data"]})]}),(0,i.jsx)("div",{className:"mt-4 p-3 bg-blue-800/30 rounded",children:(0,i.jsxs)("p",{className:"text-blue-200 text-sm",children:[(0,i.jsx)("strong",{children:"After running the fix:"}),' Refresh your browser and navigate to your organization. The "Page not found" error should be gone, and you\'ll have a clean sidebar to work with.']})})]})]})}},42099:(e,t,s)=>{"use strict";s.d(t,{N:()=>i});let i=(0,s(55647).UU)("https://yhznjxfzpthmyyhbhihp.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inloem5qeGZ6cHRobXl5aGJoaWhwIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQyNDE0MzcsImV4cCI6MjA2OTgxNzQzN30.BlP9YoilaPopQgkZXZa-_WJPUIjnX9nTyYspaBV0Cqc")},70651:(e,t,s)=>{Promise.resolve().then(s.bind(s,15954))}},e=>{e.O(0,[5647,8441,5964,7358],()=>e(e.s=70651)),_N_E=e.O()}]);