(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7167],{32573:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>o});var i=t(95155),s=t(12115),n=t(45745),r=t(42099);function o(){var e,a;let[t,o]=(0,s.useState)([]),[c,l]=(0,s.useState)(""),[d,m]=(0,s.useState)(null),[u,h]=(0,s.useState)(!0),[g,b]=(0,s.useState)(null);(0,s.useEffect)(()=>{f()},[]);let f=async()=>{try{let{data:e,error:a}=await r.N.from("organizations").select("id, name").limit(10);if(a)throw a;o(e||[]),h(!1)}catch(e){b("Failed to load organizations"),h(!1)}},C=async e=>{try{h(!0),b(null);let a=await n.o.getOrganizationSidebarItems(e),t=await n.o.getOrganizationSidebarByCategory(e);m({rawItems:a,categorizedData:t})}catch(e){b(e instanceof Error?e.message:"Unknown error")}finally{h(!1)}};return u?(0,i.jsxs)("div",{className:"p-8",children:[(0,i.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Debug Sidebar Data"}),(0,i.jsx)("p",{children:"Loading sidebar data..."})]}):g?(0,i.jsxs)("div",{className:"p-8",children:[(0,i.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Debug Sidebar Data"}),(0,i.jsxs)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded",children:[(0,i.jsx)("strong",{children:"Error:"})," ",g]})]}):(0,i.jsxs)("div",{className:"p-8",children:[(0,i.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Debug Sidebar Data"}),(0,i.jsxs)("p",{className:"mb-4",children:["Organization ID: ",(0,i.jsx)("code",{className:"bg-gray-100 px-2 py-1 rounded",children:organizationId})]}),(0,i.jsxs)("div",{className:"space-y-8",children:[(0,i.jsxs)("div",{children:[(0,i.jsxs)("h2",{className:"text-xl font-semibold mb-2",children:["Raw Sidebar Items (",(null==d||null==(e=d.rawItems)?void 0:e.length)||0,")"]}),(0,i.jsx)("pre",{className:"bg-gray-100 p-4 rounded overflow-auto text-sm",children:JSON.stringify(null==d?void 0:d.rawItems,null,2)})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h2",{className:"text-xl font-semibold mb-2",children:"Categorized Sidebar Data"}),(0,i.jsx)("pre",{className:"bg-gray-100 p-4 rounded overflow-auto text-sm",children:JSON.stringify(null==d?void 0:d.categorizedData,null,2)})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h2",{className:"text-xl font-semibold mb-2",children:"CLIENT CONTACT Category Items"}),(null==d||null==(a=d.categorizedData)?void 0:a["CLIENT CONTACT"])?(0,i.jsxs)("div",{children:[(0,i.jsxs)("p",{children:[(0,i.jsx)("strong",{children:"System Items:"})," ",d.categorizedData["CLIENT CONTACT"].systemItems.length]}),(0,i.jsxs)("p",{children:[(0,i.jsx)("strong",{children:"Custom Items:"})," ",d.categorizedData["CLIENT CONTACT"].items.length]}),(0,i.jsx)("h3",{className:"font-medium mt-4 mb-2",children:"Custom Items:"}),(0,i.jsx)("ul",{className:"list-disc list-inside",children:d.categorizedData["CLIENT CONTACT"].items.map(e=>(0,i.jsxs)("li",{children:[e.item_name," (slug: ",e.item_slug,", active: ",e.is_active?"Yes":"No",")"]},e.id))})]}):(0,i.jsx)("p",{children:"No CLIENT CONTACT category found"})]})]}),(0,i.jsx)("div",{className:"mt-8",children:(0,i.jsx)("button",{onClick:C,className:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600",children:"Reload Data"})})]})}},42099:(e,a,t)=>{"use strict";t.d(a,{N:()=>i});let i=(0,t(55647).UU)("https://yhznjxfzpthmyyhbhihp.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inloem5qeGZ6cHRobXl5aGJoaWhwIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQyNDE0MzcsImV4cCI6MjA2OTgxNzQzN30.BlP9YoilaPopQgkZXZa-_WJPUIjnX9nTyYspaBV0Cqc")},45745:(e,a,t)=>{"use strict";t.d(a,{o:()=>s});var i=t(42099);class s{static async getOrganizationCounts(e){let a="counts_".concat(e),t=this.cache.get(a);if(t&&Date.now()-t.timestamp<this.CACHE_DURATION)return t.data;try{let t={},{count:s,error:n}=await i.N.from("contacts").select("*",{count:"exact",head:!0}).eq("organization_id",e);n||(t.contacts=s||0);let{count:r,error:o}=await i.N.from("locations").select("*",{count:"exact",head:!0}).eq("organization_id",e);o||(t.locations=r||0);let{count:c,error:l}=await i.N.from("documents").select("*",{count:"exact",head:!0}).eq("organization_id",e);l?t.documents=0:t.documents=c||0;let{count:d,error:m}=await i.N.from("passwords").select("*",{count:"exact",head:!0}).eq("organization_id",e);m?t.passwords=0:t.passwords=d||0;let{count:u,error:h}=await i.N.from("configurations").select("*",{count:"exact",head:!0}).eq("organization_id",e);h?t.configurations=0:t.configurations=u||0;let{count:g,error:b}=await i.N.from("networks").select("*",{count:"exact",head:!0}).eq("organization_id",e);b?t.networks=0:t.networks=g||0;let{count:f,error:C}=await i.N.from("ssl_certificates").select("*",{count:"exact",head:!0}).eq("organization_id",e);C?t.ssl_certificates=0:t.ssl_certificates=f||0;let{count:N,error:x}=await i.N.from("domains").select("*",{count:"exact",head:!0}).eq("organization_id",e);return x?t.domains=0:t.domains=N||0,this.cache.set(a,{data:t,timestamp:Date.now()}),t}catch(e){return{}}}static clearCache(e){e?(this.cache.delete("sidebar_".concat(e)),this.cache.delete("items_".concat(e)),this.cache.delete("counts_".concat(e))):this.cache.clear()}static clearCacheIfDifferentOrg(e){Array.from(this.cache.keys()).some(a=>a.includes("sidebar_")&&!a.includes(e))&&this.cache.clear()}static async getOrganizationSidebarItems(e){let a="items_".concat(e),t=this.cache.get(a);if(t&&Date.now()-t.timestamp<this.CACHE_DURATION)return t.data;let{data:s,error:n}=await i.N.from("organization_sidebar_items").select("*").eq("organization_id",e).eq("is_active",!0).order("sort_order",{ascending:!0});if(n)throw n;let r=s||[];return this.cache.set(a,{data:r,timestamp:Date.now()}),r}static async getOrganizationSidebarByCategory(e){let a="sidebar_".concat(e),t=this.cache.get(a);if(t&&Date.now()-t.timestamp<this.CACHE_DURATION)return t.data;let i=await this.getOrganizationSidebarItems(e),s=await this.getOrganizationCounts(e),n={"CLIENT CONTACT":{name:"CLIENT CONTACT",items:[],systemItems:[{name:"Site Summary",href:"/site-summary",icon:"FileText",count:1},{name:"Site Summary (Legacy)",href:"/site-summary-legacy",icon:"Archive",count:1},{name:"After Hour and Building/Site...",href:"/after-hour-access",icon:"Clock",count:1},{name:"Onsite Information",href:"/onsite-information",icon:"AlertTriangle"},{name:"Locations",href:"/locations",icon:"MapPin",count:s.locations||0},{name:"Contacts",href:"/contacts",icon:"Users",count:s.contacts||0}]},"CORE DOCUMENTATION":{name:"CORE DOCUMENTATION",items:[],systemItems:[{name:"TIS Standards Exception",href:"/tis-standards-exception",icon:"AlertTriangle"},{name:"TIS Contract Exceptions",href:"/tis-contract-exceptions",icon:"FileX"},{name:"Request for Change Form (RFC)",href:"/rfc",icon:"Clock"},{name:"Change Log",href:"/change-log",icon:"FileText"},{name:"Configurations",href:"/configurations",icon:"Settings",count:s.configurations||0},{name:"Documents",href:"/documents",icon:"FileText",count:s.documents||0},{name:"Domains - Liongard",href:"/domains-liongard",icon:"FileText",count:s.domains||0},{name:"Domain Tracker",href:"/domain-tracker",icon:"Globe",count:s.domains||0},{name:"Known Issues",href:"/known-issues",icon:"AlertTriangle",count:0},{name:"Maintenance Windows",href:"/maintenance-windows",icon:"Zap"},{name:"Multi-Factor Authentication",href:"/mfa",icon:"Shield",count:0},{name:"Networks",href:"/networks",icon:"Network",count:s.networks||0},{name:"Passwords",href:"/passwords",icon:"Key",count:s.passwords||0},{name:"SSL Tracker",href:"/ssl-tracker",icon:"Lock",count:s.ssl_certificates||0},{name:"TLS/SSL Certificate",href:"/tls-ssl-certificate",icon:"Shield",count:s.ssl_certificates||0}]}};return i.forEach(e=>{let a=e.parent_category||"CLIENT CONTACT";n[a]||(n[a]={name:a,items:[],systemItems:[]}),n[a].items.push(e)}),this.cache.set(a,{data:n,timestamp:Date.now()}),n}static async createSidebarItem(e){try{let{data:t,error:s}=await i.N.from("organization_sidebar_items").insert([e]).select().single();if(s){var a;if("42P01"===s.code)throw Error('Database table "organization_sidebar_items" does not exist. Please run the database setup SQL first.');if("23505"===s.code)throw Error("A sidebar item with this slug already exists for this organization.");if(null==(a=s.message)?void 0:a.includes("timeout"))throw Error("Database connection timeout. Please try again.");else throw Error("Database error: ".concat(s.message||"Unknown error"))}return this.clearCache(e.organization_id),t}catch(e){throw e}}static async updateSidebarItem(e,a){let{data:t,error:s}=await i.N.from("organization_sidebar_items").update({...a,updated_at:new Date().toISOString()}).eq("id",e).select().single();if(s)throw s;return t}static async deleteSidebarItem(e){let{error:a}=await i.N.from("organization_sidebar_items").delete().eq("id",e);if(a)throw a}static getAvailableIcons(){return[{value:"FileText",label:"Document"},{value:"Folder",label:"Folder"},{value:"Users",label:"Users"},{value:"Phone",label:"Phone"},{value:"Mail",label:"Email"},{value:"Settings",label:"Settings"},{value:"Code",label:"Code"},{value:"Database",label:"Database"},{value:"Server",label:"Server"},{value:"Network",label:"Network"},{value:"Shield",label:"Security"},{value:"Key",label:"Key"},{value:"Lock",label:"Lock"},{value:"Globe",label:"Globe"},{value:"Calendar",label:"Calendar"},{value:"Clock",label:"Clock"},{value:"Bug",label:"Bug"},{value:"AlertTriangle",label:"Alert"},{value:"CheckCircle",label:"Check"},{value:"Info",label:"Info"},{value:"Star",label:"Star"},{value:"Heart",label:"Heart"},{value:"Bookmark",label:"Bookmark"},{value:"Tag",label:"Tag"}]}static getAvailableCategories(){return[{value:"CLIENT CONTACT",label:"Client Contact"},{value:"CORE DOCUMENTATION",label:"Core Documentation"}]}}s.cache=new Map,s.CACHE_DURATION=3e4},72724:(e,a,t)=>{Promise.resolve().then(t.bind(t,32573))}},e=>{e.O(0,[5647,8441,5964,7358],()=>e(e.s=72724)),_N_E=e.O()}]);