(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5469],{35695:(e,s,t)=>{"use strict";var a=t(18999);t.o(a,"useParams")&&t.d(s,{useParams:function(){return a.useParams}}),t.o(a,"usePathname")&&t.d(s,{usePathname:function(){return a.usePathname}}),t.o(a,"useRouter")&&t.d(s,{useRouter:function(){return a.useRouter}}),t.o(a,"useSearchParams")&&t.d(s,{useSearchParams:function(){return a.useSearchParams}})},42099:(e,s,t)=>{"use strict";t.d(s,{N:()=>a});let a=(0,t(55647).UU)("https://yhznjxfzpthmyyhbhihp.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inloem5qeGZ6cHRobXl5aGJoaWhwIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQyNDE0MzcsImV4cCI6MjA2OTgxNzQzN30.BlP9YoilaPopQgkZXZa-_WJPUIjnX9nTyYspaBV0Cqc")},70402:(e,s,t)=>{Promise.resolve().then(t.bind(t,96195))},96195:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>l});var a=t(95155),i=t(12115),n=t(42099),r=t(35695);function l(){let[e,s]=(0,i.useState)([]),[t,l]=(0,i.useState)(""),[o,c]=(0,i.useState)([]),[d,u]=(0,i.useState)([]),[g,m]=(0,i.useState)(!1),[h,b]=(0,i.useState)([]),x=(0,r.useRouter)();(0,i.useEffect)(()=>{N()},[]);let p=e=>{b(s=>[...s,e])},N=async()=>{try{let{data:e,error:t}=await n.N.from("organizations").select("id, name").limit(10);if(t)throw t;s(e||[])}catch(e){}},f=async e=>{m(!0),b([]);try{p("\uD83D\uDD0D Debugging organization: ".concat(e));let{data:s,error:t}=await n.N.from("organization_sidebar_items").select("*").eq("organization_id",e).order("sort_order");if(t)return void p("❌ Error fetching sidebar items: ".concat(t.message));c(s||[]),p("\uD83D\uDCCB Found ".concat((null==s?void 0:s.length)||0," sidebar items"));let a=[];for(let e of s||[]){p('\uD83D\uDD0D Checking item: "'.concat(e.item_name,'" (slug: ').concat(e.item_slug,")"));let{data:s,error:t}=await n.N.from("page_contents").select("*").eq("sidebar_item_id",e.id);t?p("  ❌ Error fetching content: ".concat(t.message)):s&&0!==s.length?(p("  ✅ Has page content (".concat(s.length," records)")),a.push(...s)):p('  ⚠️ NO PAGE CONTENT FOUND - This will cause "Page not found" error')}u(a);let i=(null==s?void 0:s.filter(e=>e.item_slug.includes("onsite")||e.item_slug.includes("emergency")||e.item_slug.includes("after-hour")))||[];i.length>0&&(p("⚠️ Found ".concat(i.length," potentially problematic items:")),i.forEach(e=>{p('  - "'.concat(e.item_name,'" (').concat(e.item_slug,")"))})),p("\uD83C\uDF89 Debug completed!")}catch(e){p("❌ Debug failed: ".concat(e.message))}m(!1)},y=async(e,s)=>{if(confirm('Delete "'.concat(s,'"?')))try{await n.N.from("page_contents").delete().eq("sidebar_item_id",e);let{error:s}=await n.N.from("organization_sidebar_items").delete().eq("id",e);if(s)throw s;alert("Deleted successfully!"),t&&f(t)}catch(e){alert("Error: ".concat(e.message))}};return(0,a.jsxs)("div",{className:"min-h-screen bg-gray-900 text-white p-8",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold mb-6",children:"\uD83D\uDD0D Debug Routing Issues"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"bg-gray-800 p-6 rounded-lg",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"Select Organization"}),(0,a.jsxs)("select",{value:t,onChange:e=>l(e.target.value),className:"w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-white mb-4",children:[(0,a.jsx)("option",{value:"",children:"Select an organization..."}),e.map(e=>(0,a.jsx)("option",{value:e.id,children:e.name},e.id))]}),(0,a.jsx)("button",{onClick:()=>t&&f(t),disabled:!t||g,className:"w-full px-4 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-600 rounded text-white",children:g?"Debugging...":"Debug This Organization"})]}),(0,a.jsxs)("div",{className:"bg-gray-800 p-6 rounded-lg",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"Quick Actions"}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("button",{onClick:()=>x.push("/organizations"),className:"w-full px-4 py-2 bg-green-600 hover:bg-green-700 rounded text-white",children:"Go to Organizations List"}),(0,a.jsx)("button",{onClick:()=>t&&x.push("/organizations/".concat(t)),disabled:!t,className:"w-full px-4 py-2 bg-purple-600 hover:bg-purple-700 disabled:bg-gray-600 rounded text-white",children:"Go to Organization Home"})]})]})]}),o.length>0&&(0,a.jsxs)("div",{className:"mt-8 bg-gray-800 p-6 rounded-lg",children:[(0,a.jsxs)("h2",{className:"text-lg font-semibold mb-4",children:["Sidebar Items (",o.length,")"]}),(0,a.jsx)("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:o.map(e=>(0,a.jsx)("div",{className:"p-4 rounded border ".concat(e.item_slug.includes("onsite")||e.item_slug.includes("emergency")||e.item_slug.includes("after-hour")?"border-red-500 bg-red-900/20":"border-gray-600 bg-gray-700"),children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-medium",children:e.item_name}),(0,a.jsxs)("div",{className:"text-sm text-gray-400",children:["Slug: ",(0,a.jsx)("code",{className:"bg-gray-600 px-1 rounded",children:e.item_slug})]}),(0,a.jsxs)("div",{className:"text-sm text-gray-400",children:["Category: ",e.parent_category," | Active: ",e.is_active?"Yes":"No"]})]}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)("button",{onClick:()=>((e,s)=>{let t="/organizations/".concat(e,"/").concat(s);p("\uD83E\uDDEA Testing navigation to: ".concat(t));try{x.push(t)}catch(e){p("❌ Navigation failed: ".concat(e.message))}})(t,e.item_slug),className:"px-3 py-1 bg-blue-600 hover:bg-blue-700 rounded text-sm",children:"Test"}),(0,a.jsx)("button",{onClick:()=>y(e.id,e.item_name),className:"px-3 py-1 bg-red-600 hover:bg-red-700 rounded text-sm",children:"Delete"})]})]})},e.id))})]}),h.length>0&&(0,a.jsxs)("div",{className:"mt-8 bg-gray-800 p-6 rounded-lg",children:[(0,a.jsx)("h3",{className:"font-medium mb-4",children:"Debug Results:"}),(0,a.jsx)("div",{className:"space-y-1 text-sm font-mono max-h-96 overflow-y-auto",children:h.map((e,s)=>(0,a.jsx)("div",{className:e.includes("✅")?"text-green-400":e.includes("❌")?"text-red-400":e.includes("⚠️")?"text-yellow-400":e.includes("\uD83C\uDF89")?"text-blue-400":"text-gray-300",children:e},s))})]}),(0,a.jsxs)("div",{className:"mt-8 bg-blue-900/20 border border-blue-600 rounded-lg p-6",children:[(0,a.jsx)("h3",{className:"text-blue-400 font-semibold mb-4",children:"\uD83D\uDD27 How to Use This Tool:"}),(0,a.jsxs)("ol",{className:"text-blue-200 text-sm space-y-2",children:[(0,a.jsxs)("li",{children:["1. ",(0,a.jsx)("strong",{children:"Select your organization"})," from the dropdown"]}),(0,a.jsxs)("li",{children:["2. ",(0,a.jsx)("strong",{children:'Click "Debug This Organization"'})," to analyze all sidebar items"]}),(0,a.jsxs)("li",{children:["3. ",(0,a.jsx)("strong",{children:'Look for items with "⚠️ NO PAGE CONTENT FOUND"'})," - these cause errors"]}),(0,a.jsxs)("li",{children:["4. ",(0,a.jsx)("strong",{children:'Use "Test" button'})," to try navigating to specific items"]}),(0,a.jsxs)("li",{children:["5. ",(0,a.jsx)("strong",{children:'Use "Delete" button'})," to remove problematic items"]}),(0,a.jsxs)("li",{children:["6. ",(0,a.jsx)("strong",{children:"Items highlighted in red"})," are potentially problematic"]})]})]})]})}}},e=>{e.O(0,[5647,8441,5964,7358],()=>e(e.s=70402)),_N_E=e.O()}]);